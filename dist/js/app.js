(function(e){function t(t){for(var n,i,s=t[0],l=t[1],c=t[2],p=0,h=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var l=r[s];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("64a9"),a=r.n(n);a.a},"1dbb":function(e,t,r){},"23e9":function(e,t,r){"use strict";var n=r("d193"),a=r.n(n);a.a},2793:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAFNklEQVRIicWWe0xTdxTHP62ltJS2FKUCA3zAEHyAiopONwHnfMYsi1EHM2qmcz6ymWUuy1xczGJM5rLsFecfJlui7pElujEMUxwqPtCZoOCQp0MspdZCWyi0hV5690dHB7QdoMl2kl/yu7/7Pedzzzm/e38X/ieT9E8+PHJ8S7hMnjYaZ48gaPq8omL/7le2PDb40NHvatYuf25UYJPFyqUblYyRSW+/93r+rNH4ygZepEyIH40vUqmE+bPS6enxZB48crJ6386CaSP2HRUphK3KzZZkpiWnHzxysvo/BT8OXBZssc7agMPjAGCKLhW1PJLWLhOt3aZBumjiAuBA+kjKHjRjtTwSXbgOXbgOmdT3bEqZwr/WP4LZSDMPmrFarkYpUwAQ9jdYIVMSrRissznc3KpupNloHhpC0u1yT9378bGth9/eemzE4NYuU0CpbW5bQKnnJM5m77Z1QVtTXHbTXvZ7ZeOwGdukFu3pipIAgcFYHsoXgzG0vr6tReFUOmKHBXdIbNqfbp0PCXkMU6iIGh7cb6pwJZsXvkSKPgmLw8aJ64U8aG8FYEZCKuvmrkQlV/KHsZ4T5YUkRMeyMzefw78ew9zZzt7lr9Jgbma4JAJ29ZL0BUyJncwn577B7ekhP3u1TyiRsiPnZe601PNF6XHmJ89kcdo8DFYT2gg1yfokFGHhTI1PwWB9OGw5AjKOkCuxOTswWE18feUUEfJ/trJcJqfL3U2TpYUDhV/S3ePC0yfQYL7P5JhEbN2dANSY7o0ePNBszg5szg4AvKKXE9cLWZu1jJy0bK41VvBL5QUAqo2NZE2cht3ZSVNbC2qVArVKgdghV4aKPaZ/MmdN7j5B4gmb/lQqMepoLtbeCBDfbzNytvoy5s42Nj3zIhaHFYPVhKfPw5rMPLyiSIO5mfFRGizVVox1rboYfXLypNSMJdFJExtMf9Z39McK6LGIyBiJb3nR01msn7cSAFV4BLvyCojT6qk01GJ3OoiK0ADQ3N6KW+hlRkIq1cYGbI86MNRaSUnKnP1s7tJ39LHjd4cJ4uSBnABw3cMm4rQx7MorID97Nb2CBwBnj4txkTp25ubzxvMb0SgjudNS53tYUaSm9R6ePoHGR80AaLRRJCQmkpCYiFqtFYZyAnp8+0EN+3/+nBT9BM7fvUbdwyZ/JQ6eOUpGQirKMAXfXi+ircvm9ztdUcKF2hsI3r6AFgWzoJvLaDNjtAV8fxH6BCqa7wYNZLSbMdoDfYYFT+xLffDu9g1pAI7eLgSvr8RquRqZVIZLcOMWXIOcdQrfCTVUX1VVQ5VoEhnwaxUSPNAcvQ5cghvwnUoyqQy34MLqtocAOzhbUkabxU6kXIXF3A6i6NdJkEjDFBHbl6wpWAHQ43bWhQB3+U8bfUQMAC7Bja3HNkQ5ya9XjQ3n++NXWLAoD0l4FMlTkvzZpk2frolPTNoger1cLj3nlIiSF4KC4yPjELzjAPznsk6h88+D6fXzxuHdJKHsahVZ2QsH3ddotGg0Wsou/Gb3Ih64XHLqatA/EEevA6vbjtVtx+P1vQn9pR44hurnLs5grE7FvfragJgNtTVuw/2mkotnfvgUQvQ4PjIuYE2n0Pl7+m/6D/a+yY633kcTpSNGPx6A9jaLeLP8WoPBa9/YrxsEbmxuDRp4tPbats0c+ugz8patRCKRcq64yOhyda5oLC3uCQB7BM9XPxZfmvqkUKlUSsa09JlLVyzTnT1TpPd6RaHX6dxQXlpkfNLYI7acVev35KxavyfYvb8ADEM1rB9bi7AAAAAASUVORK5CYII="},"2d86":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABmJLR0QA/wD/AP+gvaeTAAADjElEQVRYhe3Wz2/TZhgH8K+T+H0T20nDn1FzW3G3XdamnCDJLjgVFMLaIYFg0yZouHMbNDE7jHWAtIJ22CSSFtZ05zXZJFpnZ2f/w0S7xnacn/UOTSCEtjRNKJrk78mK5Pf5+Hlevw7gxIkTJ07+Pzl9e/1KJKXeg20z76N+NLV+9/Sd5191/uZqX5yae36VJW5liCMznyp/zR8p0raZaFKd9/voZULYb8J31q69Bjw1t3aZeNjk2ZMiL4eOcwGBxCPfFn48EqRtMxFFnRc4clEOify5k8c5Sj1z7U66AMDFuEJBgTI8JaCsG2fGhvkhL52MKOq77WQLN8R545MTIu8lHvgICz9HGcbl/vgl8LeENLVpWOlMXjNrjSYo64EcEvmg4I2HlcLCO0G2cH4fjZ8ZH+Yp60GjsY2lP/82N0pWVjKl8y+BYBh7+bo0s6VX0ov5ollvNFudFPljAo0NHNmBi4V2OtdobOPpH1p5418rO2JIU7duMdsAwHTfGFUKC8GANyZ/MsyzHjeq9SYWc5q5pVcz2YQ0A4ax+8WFU+oPAY5e6MQt5YvlDb3y6wf6iQttHNDxFgMAGMbOzkqfb25VnmS6OhnwUzmaKjzqq5Mt3BD/CldvbmMpr5Vf6NazbtybwBZyJSFd2ixZv2RyRaONlPtFduLGX+EWc0XjH72yNKJL8W4c0D3irgUjivowKPjOymPDAmF3xp3JaWap13F34WgH7oVuPZN06bPdcPsD28hU4UHQ7z3XjdT1yuJyYnT6rci9cKtFY1MvPx0xRqf3wr0d2CoQVQr3/Rw53y5QqzeRPghyF1yt3kQmXzRLJetAD3iwvbRHoX2Ru9zTc/cPDGwVjCjqfICjcbm1yfdE7oPrdf/29jbucsC+gQTQvSXauK1y9cnKdelSL2fpoY6LaKrwvZ8nF2Mhkadsx+jM6s+2DTvA0yl5XBQo60a13kB6VSsbZv2n5dkT13o96A996EZS6r2Aj0zHQq/vSQCIjYk8Yd2o1hpI/66ZJav2eCUx+uVh6vT1fY0o69/5vXSmc9wAQFg3KrUGMqtauWTVHq3MHg7XNxAAokk1KfjIVXlC5H3EAwA7Y80VzZJZfdwPbiBAAAgn12/7ffSLyQlRYACkVzVDNysL2Zsffd3v2gP7CxWdW0vxnPcKAzBGpfowm/jwxqDWHljCSTUZTqrJ9+1w4sSJEydHmP8AfRczlEa/q4sAAAAASUVORK5CYII="},"56d7":function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"set",(function(){return I})),r.d(n,"loadPhoneList",(function(){return F})),r.d(n,"loadActiveHistory",(function(){return M})),r.d(n,"updatePeople",(function(){return N})),r.d(n,"updatePeopleAndHistory",(function(){return V})),r.d(n,"createAndSetPeople",(function(){return B})),r.d(n,"createOrUpdatePhone",(function(){return Q})),r.d(n,"freePhone",(function(){return Z})),r.d(n,"addEmptyPhone",(function(){return q})),r.d(n,"loadPeopleList",(function(){return $})),r.d(n,"syncADState",(function(){return te})),r.d(n,"findPeopleLocal",(function(){return ne})),r.d(n,"findPeopleAD",(function(){return oe})),r.d(n,"selectPeople",(function(){return se}));var a={};r.r(a),r.d(a,"getPhoneList",(function(){return ce})),r.d(a,"getActiveHistory",(function(){return ue})),r.d(a,"getHistory",(function(){return pe})),r.d(a,"getSelectPeople",(function(){return he}));var o={};r.r(o),r.d(o,"loadPhonesCash",(function(){return be})),r.d(o,"loadCashYear",(function(){return ge})),r.d(o,"loadCashYearDepart",(function(){return we})),r.d(o,"loadCashMonth",(function(){return Oe})),r.d(o,"loadCashDetail",(function(){return Se}));var i={};r.r(i),r.d(i,"getPhonesCash",(function(){return _e})),r.d(i,"getCashMonth",(function(){return De})),r.d(i,"getCashYear",(function(){return Ce})),r.d(i,"getCashYearDepart",(function(){return Ee}));var s={};r.r(s),r.d(s,"set",(function(){return Le})),r.d(s,"loadImportStatus",(function(){return Re})),r.d(s,"loadImportHistory",(function(){return Ie})),r.d(s,"updateLastUploadDate",(function(){return He})),r.d(s,"checkFileName",(function(){return Me}));var l={};r.r(l),r.d(l,"getContractCashDetail",(function(){return ze})),r.d(l,"getImportHistory",(function(){return Ve})),r.d(l,"getLastUploadDate",(function(){return Ge}));var c={};r.r(c),r.d(c,"loadCSRF",(function(){return Vn})),r.d(c,"toLoginPage",(function(){return Bn})),r.d(c,"logout",(function(){return Jn})),r.d(c,"AUTH_REQUEST",(function(){return Kn})),r.d(c,"callRestGet",(function(){return Xn})),r.d(c,"setRestLoadData",(function(){return Wn})),r.d(c,"setSearchFilter",(function(){return ea})),r.d(c,"setProgress",(function(){return ta})),r.d(c,"updateProgress",(function(){return na})),r.d(c,"setCurrentPath",(function(){return oa}));var u={};r.r(u),r.d(u,"getCSRF",(function(){return sa})),r.d(u,"getAuth",(function(){return la})),r.d(u,"getCsrfEnable",(function(){return ca})),r.d(u,"getAuthEnable",(function(){return ua})),r.d(u,"getRestLoadData",(function(){return pa})),r.d(u,"getProgress",(function(){return ha})),r.d(u,"getSearchFilter",(function(){return fa})),r.d(u,"getCurrentPath",(function(){return da}));var p={};r.r(p),r.d(p,"setDetailAnalizeYear",(function(){return ba})),r.d(p,"getDetailAnalizeYear",(function(){return ga}));var h={};r.r(h),r.d(h,"getDetailAnalizeYear",(function(){return Aa}));var f={};r.r(f),r.d(f,"loadHistoryCashAnalize",(function(){return Sa}));var d={};r.r(d),r.d(d,"getHistoryCashAnalize",(function(){return _a}));r("8e6e"),r("ac6a"),r("456d"),r("96cf");var m,b=r("3b8d"),v=r("bd86"),g=(r("14c6"),r("08c1"),r("4842"),r("d9fc"),r("a026")),y=r("2f62"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap",attrs:{id:"app"}},[e.auth?n("div",{attrs:{id:"nav"}},[n("b-navbar",{attrs:{type:"light",variant:"light",small:"true"}},[n("b-navbar-nav",[n("router-link",{attrs:{to:"/phones"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.href,a=(t.route,t.navigate);t.isActive,t.isExactActive;return[n("b-nav-item",{attrs:{href:r},on:{click:a}},[e._v("Телефоны")])]}}],null,!1,3587541810)}),n("b-nav-item-dropdown",{attrs:{left:"",text:"Начисления"}},[n("router-link",{attrs:{to:"/cashPhones"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.href,a=(t.route,t.navigate);t.isActive,t.isExactActive;return[n("b-dropdown-item",{attrs:{href:r},on:{click:a}},[e._v("По телефонам (за год)")])]}}],null,!1,1151812841)}),n("router-link",{attrs:{to:"/cashYearDepartment"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.href,a=(t.route,t.navigate);t.isActive,t.isExactActive;return[n("b-dropdown-item",{attrs:{href:r},on:{click:a}},[e._v("По подразделениям (за год)")])]}}],null,!1,3560076656)}),n("router-link",{attrs:{to:"/cashMonth"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.href,a=(t.route,t.navigate);t.isActive,t.isExactActive;return[n("b-dropdown-item",{attrs:{href:r},on:{click:a}},[e._v("За месяц")])]}}],null,!1,1871182659)})],1),n("router-link",{attrs:{to:"/import"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.href,a=(t.route,t.navigate);t.isActive,t.isExactActive;return[n("b-nav-item",{attrs:{href:r},on:{click:a}},[e._v("Импорт")])]}}],null,!1,4073582432)}),n("b-nav-item-dropdown",{attrs:{text:"Детализации",right:""}},[n("router-link",{attrs:{to:"/detailYear"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.href,a=(t.route,t.navigate);t.isActive,t.isExactActive;return[n("b-dropdown-item",{attrs:{href:r},on:{click:a}},[e._v("Анализ тарифов за год")])]}}],null,!1,1532824272)})],1),n("b-nav-item-dropdown",{attrs:{text:"История",right:""}},[n("router-link",{attrs:{to:"/history"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.href,a=(t.route,t.navigate);t.isActive,t.isExactActive;return[n("b-dropdown-item",{attrs:{href:r},on:{click:a}},[e._v("История")])]}}],null,!1,493337783)})],1),n("b-nav-item",{on:{click:function(t){return e.logout()}}},[e._v("Logout")])],1)],1)],1):e._e(),e.auth?n("div",[n("b-breadcrumb",e._l(this.breadcrumbList,(function(t,a){return n("b-breadcrumb-item",{key:a,attrs:{to:t.path,value:t}},["home"==t.text?n("img",{attrs:{src:r("88b6"),width:"20px;"}}):e._e(),"home"!==t.text?n("a",{attrs:{href:t.path}},[e._v("\n          "+e._s(t.text)+"\n        ")]):e._e()])})),1)],1):e._e(),n("router-view")],1)},A=[],O={posts:[],phoneList:[],errors:[],activeHistories:[],selectedPeople:{}},P={MUTATION_LOADPHONELIST:"loadPhoneList",MUTATION_UPDATEPEOPLE:"updatePeople",MUTATION_UPDATEPEOPLE_HISTORY:"updatePeople",MUTATION_UPDATEACTIVEHISTORY:"updateActiveHistory",UPDATE_FREEPHONE:"freePhone",ADD_EMPTY_PHONE:"addEmptyPhone",SELECT_PEOPLE:"selectPeople"},S={MUTATION_LOADPHONESCASH:"loadPhonesCash",MUTATION_LOADCASHMONTH:"loadCashMonth",MUTATION_LOADCASHYEAR:"loadCashYear",MUTATION_LOADCASH_YEAR_DEPART:"loadCashYearDepartment"},k={UPDATE_CONTRACT_CASH_DETAIL:"updateContractCashDetail",SET_IMPORT_HISTORY:"setImportHistory",SET_LAST_UPLOAD_DATE:"setLastUploadDate"},x={SET_CSRF:"setCSRF",AUTH_SUCCESS:"authSuccess",CLEAR_CSRF:"clearCSRF",LOGOUT:"logout",REST_LOAD_DATA:"restLoadData",SET_PROGRESS:"setProgress",SET_SEARCH_FILTER:"setSearchFilter",SET_CURRENT_PATH:"setCurrentPath"},_={SET_DETAIL_ANALIZE_YEAR:"setDetailAnalizeYear"},D={SET_HISTORY_CASH_ANALIZE:"setHistoryCashAnalize"},C=r("bc3a"),E=r.n(C),j=E.a.create({baseURL:config.VUE_APP_API_URL||Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL,headers:{"Access-Control-Allow-Origin":config.VUE_APP_ORIGINS||Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_ORIGINS}});function T(e){return L.apply(this,arguments)}function L(){return L=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,j.defaults.xsrfHeaderName="X-CSRF-TOKEN",j.defaults.withCredentials=!0,e.next=5,j.get(t);case 5:return r=e.sent,n=r.headers["x-csrf-token"],n&&n.length&&Ea.commit("GlobalStore/"+x.SET_CSRF,n),e.abrupt("return",r);case 11:return e.prev=11,e.t0=e["catch"](0),e.t0.response&&401===e.t0.response.status?Ea.dispatch("GlobalStore/logout"):console.log("getRestApi error: ",e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),L.apply(this,arguments)}function R(e,t){return U.apply(this,arguments)}function U(){return U=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=Ea.getters["GlobalStore/getCSRF"],o=Ea.getters["GlobalStore/getCsrfEnable"],!o||a.length){e.next=6;break}return console.log("postRestApi: csrf empty"),e.abrupt("return");case 6:if(j.defaults.xsrfHeaderName="X-CSRF-TOKEN",j.defaults.withCredentials=!0,j.defaults.headers.post["X-CSRF-TOKEN"]=a,j.defaults.headers.post["X-XSRF-TOKEN"]=a,!r){e.next=16;break}return e.next=13,j.post(t,r);case 13:n=e.sent,e.next=19;break;case 16:return e.next=18,j.post(t);case 18:n=e.sent;case 19:if(i=n.headers["x-csrf-token"],i&&i.length&&Ea.commit("GlobalStore/"+x.SET_CSRF,i),!n||200!==n["status"]){e.next=23;break}return e.abrupt("return",n);case 23:return n&&401===n["status"]&&console.log("postRestApi res return: 401"),e.abrupt("return",[]);case 27:if(e.prev=27,e.t0=e["catch"](0),!e.t0.response||401!==e.t0.response.status){e.next=33;break}Ea.dispatch("GlobalStore/logout"),e.next=35;break;case 33:return console.log("postRestApi error: ",e.t0),e.abrupt("return",e.t0);case 35:return e.abrupt("return",[]);case 36:case"end":return e.stop()}}),e,null,[[0,27]])}))),U.apply(this,arguments)}function I(e,t){var r=e.commit,n=t.data;r(P.MUTATION_LOADPHONELIST,{data:n})}function F(e){return H.apply(this,arguments)}function H(){return H=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,R("getPhones","");case 3:n=e.sent,n&&(n=n["data"],r(P.MUTATION_LOADPHONELIST,{data:n}));case 5:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function M(e,t){return Y.apply(this,arguments)}function Y(){return Y=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,t.state,e.prev=1,e.next=4,R("getActiveHistory",{phone:r});case 4:return n=e.sent,a=n["data"],e.abrupt("return",a);case 9:e.prev=9,e.t0=e["catch"](1),console.log("action error: loadActiveHistory: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),Y.apply(this,arguments)}function N(e,t){return z.apply(this,arguments)}function z(){return z=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit;try{n(P.MUTATION_UPDATEPEOPLE,r)}catch(a){console.log("action error: updatePeople: ",a)}case 2:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function V(e,t){return G.apply(this,arguments)}function G(){return G=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.abrupt("return",n(P.MUTATION_UPDATEPEOPLE_HISTORY,r));case 5:e.prev=5,e.t0=e["catch"](1),console.log("action error: updatePeopleAndHistory: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[1,5]])}))),G.apply(this,arguments)}function B(e,t){return J.apply(this,arguments)}function J(){return J=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.prev=1,e.abrupt("return",R("createAndSetPeople",r));case 5:e.prev=5,e.t0=e["catch"](1);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,null,[[1,5]])}))),J.apply(this,arguments)}function Q(e,t){return K.apply(this,arguments)}function K(){return K=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.prev=1,e.abrupt("return",R("createOrUpdatePhone",{phone:r}));case 5:e.prev=5,e.t0=e["catch"](1),console.log("action createOrUpdatePhone error: ",e.t0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[1,5]])}))),K.apply(this,arguments)}function Z(e,t){return X.apply(this,arguments)}function X(){return X=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,a=R("freePhone",{history:r}).then((function(e){return e&&e.data&&n(P.UPDATE_FREEPHONE,e.data),e})),e.abrupt("return",a);case 6:return e.prev=6,e.t0=e["catch"](1),console.log("Action freePhone: ",e.t0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))),X.apply(this,arguments)}function q(e){return W.apply(this,arguments)}function W(){return W=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit;try{r(P.ADD_EMPTY_PHONE)}catch(n){console.log("Action addEmptyPhone: ",n)}case 2:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return ee=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.prev=1,e.next=4,T("getPeopleList");case 4:return r=e.sent,e.abrupt("return",r["data"]);case 8:return e.prev=8,e.t0=e["catch"](1),console.log("getPeopleList error: ",e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),ee.apply(this,arguments)}function te(){return re.apply(this,arguments)}function re(){return re=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T("syncADState");case 3:F(),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log("syncADState: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),re.apply(this,arguments)}function ne(e,t){return ae.apply(this,arguments)}function ae(){return ae=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.prev=1,e.next=4,R("people/findLocal",r);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e["catch"](1),console.log("[findPeopleLocal] ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),ae.apply(this,arguments)}function oe(e,t){return ie.apply(this,arguments)}function ie(){return ie=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.prev=1,e.next=4,R("people/findAD",r);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e["catch"](1),console.log("[findPeopleAD] ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),ie.apply(this,arguments)}function se(e,t){var r=e.commit;r(P.SELECT_PEOPLE,t)}var le=(m={},Object(v["a"])(m,P.MUTATION_LOADPHONELIST,(function(e,t){var r=t.data;e.phoneList=r})),Object(v["a"])(m,P.MUTATION_UPDATEACTIVEHISTORY,(function(e,t){console.log("Mutation: UpdateActiveHistory",t),e.activeHistories.push(t),console.log("Mutation: UpdateActiveHistory ",e.activeHistories)})),Object(v["a"])(m,P.MUTATION_UPDATEPEOPLE,function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r&&void 0!==r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,R("updatePeople",{people:r});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),console.log("mutation error: ",P.MUTATION_UPDATEPEOPLE," - ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,r){return e.apply(this,arguments)}}()),Object(v["a"])(m,P.MUTATION_UPDATEPEOPLE_HISTORY,function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,R("updatePeopleAndHistory",r);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e["catch"](2),console.log("mutation error: ",P.MUTATION_UPDATEPEOPLE_HISTORY," - ",e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}()),Object(v["a"])(m,P.UPDATE_FREEPHONE,function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{r&&t.phoneList.forEach((function(e){e["phone"]===r["phone"]&&null===r.people&&g["default"].delete(e,"people")}))}catch(n){console.log("mutation error:",P.MUTATION_UPDATEPEOPLE,": ",n)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Object(v["a"])(m,P.ADD_EMPTY_PHONE,(function(e){e.phoneList.unshift({active:!0,contract:"",phone:"",state:0})})),Object(v["a"])(m,P.SELECT_PEOPLE,(function(e,t){e.selectedPeople=t})),m);function ce(e){return e.phoneList}function ue(e,t){var r=e.state;try{if(void 0===r.activeHistories||null===r.activeHistories)return null;if(console.log("Value of: ",r.activeHistories.valueOf(t["phone"])),r.activeHistories[t["phone"]].length)return r.activeHistories[t["phone"]]}catch(n){return null}}function pe(e){try{if(void 0===e.activeHistories||null===e.activeHistories)return null;if(e.activeHistories.length)return e.activeHistories}catch(t){return console.log("getters error: getHistory: ",t),null}}function he(e){return e.selectedPeople}var fe,de={namespaced:!0,mutations:le,actions:n,state:O,getters:a},me={posts:[],phoneList:[],cashMonth:[],cashYear:[],cashYearDepart:[],errors:[]};function be(e,t){return ve.apply(this,arguments)}function ve(){return ve=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r&&(a=new FormData,a.append("year",r)),e.next=4,R("getCashYear",a);case 4:o=e.sent,o=o["data"],n(S.MUTATION_LOADPHONESCASH,{data:o});case 7:case"end":return e.stop()}}),e)}))),ve.apply(this,arguments)}function ge(e,t){return ye.apply(this,arguments)}function ye(){return ye=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r&&(a=new FormData,a.append("year",r)),e.next=4,R("getCashYear",a);case 4:o=e.sent,o=o["data"],n(S.MUTATION_LOADPHONESCASH,{data:o});case 7:case"end":return e.stop()}}),e)}))),ye.apply(this,arguments)}function we(e,t){return Ae.apply(this,arguments)}function Ae(){return Ae=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,R("getCashYearDepartment",r);case 3:a=e.sent,a=a["data"],n(S.MUTATION_LOADCASH_YEAR_DEPART,{data:a});case 6:case"end":return e.stop()}}),e)}))),Ae.apply(this,arguments)}function Oe(e,t){return Pe.apply(this,arguments)}function Pe(){return Pe=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,R("getCashMonth",r);case 3:a=e.sent,a=a["data"],n(S.MUTATION_LOADCASHMONTH,{data:a});case 6:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}function Se(e,t){return ke.apply(this,arguments)}function ke(){return ke=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,t.state,e.prev=1,e.next=4,R("getCashDetail",r);case 4:return n=e.sent,a=n["data"],e.abrupt("return",a);case 9:e.prev=9,e.t0=e["catch"](1),console.log("action error: loadCashDetail: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),ke.apply(this,arguments)}var xe=(fe={},Object(v["a"])(fe,S.MUTATION_LOADPHONESCASH,(function(e,t){var r=t.data;e.phoneList=r})),Object(v["a"])(fe,S.MUTATION_LOADCASHMONTH,(function(e,t){var r=t.data;e.cashMonth=r})),Object(v["a"])(fe,S.MUTATION_LOADCASHYEAR,(function(e,t){var r=t.data;e.cashYear=r})),Object(v["a"])(fe,S.MUTATION_LOADCASH_YEAR_DEPART,(function(e,t){var r=t.data;e.cashYearDepart=r})),fe);function _e(e){return e.phoneList}function De(e){return e.cashMonth}function Ce(e){return e.cashYear}function Ee(e){return e.cashYearDepart}var je,Te={namespaced:!0,mutations:xe,actions:o,state:me,getters:i};function Le(e,t){e.commit,t.data}function Re(e){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.rootState,t.rootGetters,e.prev=1,e.next=4,R("getContractCashDetail",null);case 4:n=e.sent,n=n["data"],r(k.UPDATE_CONTRACT_CASH_DETAIL,{data:n}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log("action error: loadImportStatus: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),Ue.apply(this,arguments)}function Ie(e,t){return Fe.apply(this,arguments)}function Fe(){return Fe=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,R("getImportHistory",r);case 4:a=e.sent,a=a["data"],n(k.SET_IMPORT_HISTORY,{data:a}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log("[ImportStore] action error: loadImportHistory: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),Fe.apply(this,arguments)}function He(e){var t=e.commit;t(k.SET_LAST_UPLOAD_DATE,new Date)}function Me(e,t){return Ye.apply(this,arguments)}function Ye(){return Ye=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.prev=1,e.next=4,R("checkFileImportStatus",r);case 4:return n=e.sent,n=n["data"],e.abrupt("return",n);case 9:return e.prev=9,e.t0=e["catch"](1),console.log("[ImportStore] action error: checkFileName: ",e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),Ye.apply(this,arguments)}var Ne=(je={},Object(v["a"])(je,k.UPDATE_CONTRACT_CASH_DETAIL,(function(e,t){var r=t.data;e.importList=r})),Object(v["a"])(je,k.SET_IMPORT_HISTORY,(function(e,t){var r=t.data;e.importHistory=r})),Object(v["a"])(je,k.SET_LAST_UPLOAD_DATE,(function(e,t){var r=t.data;e.lastUploadDate=r})),je);function ze(e){return e.importList}function Ve(e){return e.importHistory}function Ge(e){return e.lastUploadDate}var Be={data:null,importList:[],importHistory:[],lastUploadDate:0},Je={namespaced:!0,mutations:Ne,actions:s,state:Be,getters:l},Qe={csrf:"",auth:localStorage.getItem("auth"),csrfEnable:!1,authEnable:!0,restLoadData:!1,progress:0,searchFilter:localStorage.getItem("searchFilter"),currentPath:""},Ke=r("8c4f"),Ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container p-0",attrs:{id:"root"}},[r("b-container",{staticClass:"bv-row-1",attrs:{fluid:""}},[r("b-row",[r("b-col",[r("PhonesList")],1)],1)],1),r("div",{attrs:{id:"error"}},[r("h3",[e._v(e._s(e.errors))])])],1)},Xe=[],qe=r("5f5b"),We=(r("f9e3"),r("2dd8"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"phoneListComponent"}},[n("b-container",{staticClass:"h-25 d-inline-block"},[n("b-row",[n("b-col",[n("b-navbar",{attrs:{toggleable:"lg",type:"light",variant:"light"}},[n("b-navbar-nav",[n("b-nav-form",[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},on:{update:e.filterChange},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),n("b-input-group-append",{attrs:{size:"sm"}},[n("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")]),n("b-button",{on:{click:function(t){return e.addPhone()}}},[e._v("Add phone")]),n("b-button",{on:{click:function(t){return e.syncADState()}}},[e._v("Sync AD State")])],1)],1)],1)],1),n("b-navbar-nav",{staticClass:"ml-auto",attrs:{right:""}},[n("b-nav-form",[n("JsonCSV",{attrs:{data:e.simplePhoneList,delimiter:";",name:"phoneList.csv",bom:!0,labels:e.csvLabels}},[n("img",{attrs:{src:r("2793")}})])],1)],1)],1)],1)],1),e.updates.length?n("b-row",[e._v("\r\n                "+e._s(e.updates)+"\r\n              ")]):e._e(),e.errors.length?n("b-row",[e._v("\r\n                "+e._s(e.errors)+"\r\n              ")]):e._e()],1),n("b-table",{staticClass:"h-25 d-inline-block",attrs:{items:e.phoneList,fields:e.fields,"tbody-tr-class":e.rowClass,filter:e.localSearchFilter,striped:!0,small:!0,"sort-by":e.people,"selected-variant":"active","select-mode":"single"},scopedSlots:e._u([{key:"cell(phonePlusBtn)",fn:function(t){return[n("b-button",{attrs:{size:"sm",variant:"outline-light"},on:{click:function(r){return e.editPhone(t)}}},[e.checkEdit(t)?n("img",{attrs:{src:r("2d86"),width:"15px;"}}):n("img",{attrs:{src:r("aa91"),width:"15px;"}})])]}},{key:"cell(phone)",fn:function(t){return[e._v("\r\n                  "+e._s(e.print(t.value))+"\r\n              ")]}},{key:"cell(people)",fn:function(t){return[t.value?n("span",[e._v("\r\n                  "+e._s(e.print(t.value.fio))+"\r\n                ")]):n("span",[e._v("\r\n                  "+e._s(e.getStateName(t.item.state))+"\r\n                ")])]}},{key:"cell(department)",fn:function(t){return[t.item["people"]?n("span",[e._v("\r\n                  "+e._s(e.print(t.item.people.department))+"\r\n                ")]):e._e()]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{staticClass:"btn-no-padding",attrs:{size:"sm",variant:"outline-light"},on:{click:function(r){return e.showDetail(t)}}},[e.checkDetail(t)?n("img",{attrs:{src:r("2d86"),width:"30px;"}}):n("img",{attrs:{src:r("d395"),width:"30px;"}})])]}},{key:"row-details",fn:function(t){return[e.editPhoneMode?n("b-card",[n("b-container",[n("b-row",[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:"new-phone"}},[e._v("Телефон")])]),n("b-col",{attrs:{sm:"10"}},[n("b-form-input",{attrs:{id:"new-phone"},model:{value:t.item["phone"],callback:function(r){e.$set(t.item,"phone",r)},expression:"row.item['phone']"}})],1)],1),n("b-row",[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:"new-phone-contract"}},[e._v("Договор")])]),n("b-col",{attrs:{sm:"10"}},[n("b-form-select",{attrs:{id:"new-phone-contract",options:e.contractList},model:{value:t.item["contract"],callback:function(r){e.$set(t.item,"contract",r)},expression:"row.item['contract']"}})],1)],1),n("b-row",[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:"new-phone-state"}},[e._v("Состояние")])]),n("b-col",{attrs:{sm:"10"}},[n("b-form-select",{attrs:{id:"new-phone-state",options:e.stateList},model:{value:t.item["state"],callback:function(r){e.$set(t.item,"state",r)},expression:"row.item['state']"}})],1)],1),n("b-row",[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:"new-phone-tariff"}},[e._v("Тариф")])]),n("b-col",{attrs:{sm:"10"}},[n("b-form-input",{attrs:{id:"new-phone-tariff"},model:{value:t.item["tariff"],callback:function(r){e.$set(t.item,"tariff",r)},expression:"row.item['tariff']"}})],1)],1),n("b-row",[n("b-col",[n("b-button",{attrs:{align:"right",size:"sm"},on:{click:function(r){return e.createOrUpdatePhone(t.item)}}},[e._v("\r\n                    Create or Update\r\n                  ")])],1),n("b-col",[e.isError?n("mark",{staticClass:"inline-block secondary"},[e._v("Ошибка: "+e._s(e.errorCode))]):e._e(),e.isOK?n("mark",{staticClass:"inline-block ok"},[e._v("OK")]):e._e()])],1)],1)],1):e._e(),e.editPhoneMode?e._e():n("b-card",[n("b-container",{attrs:{size:"xs",fluid:""}},[t.item.people?e._e():n("span",[e._v("\r\n                          "+e._s(t.item=e.generateEmptyPeople(t.item))+"\r\n                        ")]),n("div",[n("b-button",{attrs:{variant:"link"},on:{click:function(t){e.findPeople=!e.findPeople}}},[n("img",{attrs:{src:r("c955"),width:"24px;"}}),e._v("\r\n                          Поиск сотрудников\r\n                        ")])],1),n("div",[e.findPeople?n("FindPeople"):e._e()],1),e._l(t.item.people,(function(r,a){return n("span",{key:a,attrs:{value:r}},[e.checkPeopleKeyType(a,"text")?n("span",[n("b-row",{key:a,staticClass:"my-1"},[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:""+a}},[e._v(e._s(e.getPeopleFieldLabel(a))+":")])]),n("b-col",[n("b-form-input",{attrs:{id:""+a,placeholder:""+r},model:{value:t.item.people[a],callback:function(r){e.$set(t.item.people,a,r)},expression:"row.item.people[key]"}})],1)],1)],1):e._e(),e.checkPeopleKeyType(a,"checkbox")?n("span",[n("b-row",{key:a,staticClass:"my-1"},[n("b-col",[n("label",{attrs:{for:""+a}},[e._v(e._s(e.getPeopleFieldLabel(a))+":")])]),n("b-col",{attrs:{align:"left"}},[n("b-form-checkbox",{key:""+a,attrs:{value:1,"unchecked-value":0},model:{value:t.item.people[a],callback:function(r){e.$set(t.item.people,a,r)},expression:"row.item.people[key]"}})],1)],1)],1):e._e()])})),n("b-row",[n("b-col",{attrs:{sm:"3"}},[e.checkUpdate(t)?n("b-button",{attrs:{align:"right",size:"sm",disabled:t.item.people&&!t.item.people["people"]},on:{click:function(r){return e.updatePeople(t.item.people)}}},[e._v("\r\n                          Update\r\n                        ")]):e._e(),e.checkCreate(t)?n("b-button",{attrs:{align:"right",size:"sm",disabled:!e.createbutton[t.item["id"]]},on:{click:function(r){return e.createPeople(t.item)}}},[e._v("\r\n                              Create\r\n                            ")]):e._e()],1),e.history?n("span",[n("b-col",[n("Datepicker",{attrs:{highlighted:e.pickerState.highlighted,"bootstrap-styling":!0},model:{value:e.history["datestart"],callback:function(t){e.$set(e.history,"datestart",t)},expression:"history['datestart']"}},[n("div",{staticClass:"calender-header",attrs:{slot:"beforeCalendarHeader"},slot:"beforeCalendarHeader"},[e._v("\r\n                              Choose a Date Start\r\n                            ")])])],1)],1):e._e(),n("b-col",[e.isError?n("mark",{staticClass:"inline-block secondary"},[e._v("Ошибка: "+e._s(e.errorCode))]):e._e(),e.isOK?n("mark",{staticClass:"inline-block ok"},[e._v("OK")]):e._e()])],1),n("b-row",[n("b-col",{attrs:{sm:"3"}},[e.createbutton[t.item["id"]]?e._e():n("b-button",{attrs:{id:t.item["id"],disabled:e.freebutton[t.item["id"]],align:"right",size:"sm"},on:{click:function(t){return e.freePhone(e.history)}}},[e._v("\r\n                              Free phone\r\n                            ")])],1),e.history?n("span",[n("b-col",[n("Datepicker",{attrs:{"bootstrap-styling":!0,highlighted:e.pickerState.highlighted},on:{selected:function(r){return e.setButtonInVisibility(t.item["id"],!1)}},model:{value:e.history["dateend"],callback:function(t){e.$set(e.history,"dateend",t)},expression:"history['dateend']"}},[n("div",{staticClass:"calender-header",attrs:{slot:"beforeCalendarHeader"},slot:"beforeCalendarHeader"},[e._v("\r\n                              Choose a Date End\r\n                            ")])])],1)],1):e._e()],1)],2)],1)]}}])})],1)}),$e=[],et=(r("7514"),r("fa33")),tt=r("2347"),rt=r.n(tt),nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"border"},[r("b-input-group",[r("div",[r("label",[e._v("ФИО: ")])]),r("div",[r("b-form-input",{attrs:{size:"sm",placeholder:"ФИО"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findPeople()}},model:{value:e.fio,callback:function(t){e.fio=t},expression:"fio"}})],1),r("b-form-append",{attrs:{size:"sm"}},[r("b-button",{attrs:{size:"sm"},on:{click:function(t){return e.findPeople()}}},[e._v("\n          Поиск\n        ")]),r("b-checkbox",{model:{value:e.findLocalPeople,callback:function(t){e.findLocalPeople=t},expression:"findLocalPeople"}},[e._v("\n            Поиск в локальной базе\n          ")])],1),r("b-table",{attrs:{items:e.people,fields:e.fields,"selected-variant":"active",selectable:"","select-mode":"single","tbody-tr-class":e.rowClass},on:{"row-selected":e.setSelectedPeople},scopedSlots:e._u([{key:"cell(fio)",fn:function(t){return[r("div",[e._v(e._s(t.item.account))]),r("div",[e._v(e._s(t.item.fio))]),t.item.department?r("div",[e._v(e._s(t.item.department))]):e._e(),t.item.department?r("div",[e._v(e._s(t.item.position))]):e._e()]}}])}),r("b-button",{staticClass:"right",attrs:{size:"sm"},on:{click:e.selectPeople}},[e._v("\n        Выбрать\n      ")])],1)],1)])},at=[],ot={name:"FindPeople",components:{},data:function(){return{fio:"",people:{},selectedPeople:{},fields:[{key:"fio",label:""}],findLocalPeople:!1}},props:{},computed:{},mounted:function(){},watch:{},methods:{findPeople:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.people=[],this.selectedPeople={},t=new FormData,t.append("fio",this.fio),!this.findLocalPeople){e.next=10;break}return e.next=7,this.$store.dispatch("PhoneListStore/findPeopleLocal",t);case 7:r=e.sent,e.next=13;break;case 10:return e.next=12,this.$store.dispatch("PhoneListStore/findPeopleAD",t);case 12:r=e.sent;case 13:r&&r.data&&(this.people=r.data);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectPeople:function(){this.$store.dispatch("PhoneListStore/selectPeople",this.selectedPeople)},setSelectedPeople:function(e){this.selectedPeople=e[0]},rowClass:function(e,t){return e&&e.people&&e.people>0?"table-secondary":""}}},it=ot,st=(r("a993"),r("2877")),lt=Object(st["a"])(it,nt,at,!1,null,null,null),ct=lt.exports;function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ht={ACTIVE:1,INACTIVE:0,EXCLUDED:2,REISSUED:3};function ft(){var e=(new Date).getMonth()+1;return e>1?e-1:12}function dt(){return 12===ft()?(new Date).getFullYear()-1:(new Date).getFullYear()}function mt(e){return bt.apply(this,arguments)}function bt(){return bt=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,t)}));case 2:case"end":return e.stop()}}),e)}))),bt.apply(this,arguments)}var vt={data:function(){return{filter:""}},computed:pt({},y["a"].mapGetters({searchFilter:"GlobalStore/getSearchFilter"}),{localSearchFilter:function(){return this.searchFilter!==this.filter&&(this.filter=this.searchFilter),this.searchFilter?this.searchFilter:""}}),methods:{filterChange:function(e){this.$store.dispatch("GlobalStore/setSearchFilter",e)}}},gt={methods:{getRowClass:function(e,t,r,n){var a="textNormal";return t&&!t.people?"table-danger":e===ht.REISSUED||e===ht.EXCLUDED?t&&t.people?"table-warning":"textLightGray":e===ht.INACTIVE?t&&t.people?"table-warning":"textGray":t&&1===t["serviceaccount"]?a:t&&0===t["adstate"]?"table-danger":t&&t.people?r&&!n?"table-danger":a:"table-secondary"},getStateName:function(e){switch(e){case ht.ACTIVE:return"Активный";case ht.INACTIVE:return"Заблокированный";case ht.EXCLUDED:return"Исключен";case ht.REISSUED:return"Переоформлен"}}}};function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g["default"].use(qe["a"]);var At={data:function(){return{freebutton:[],createbutton:{},fields:[{key:"phonePlusBtn",label:""},{key:"phone",label:"Телефон",sortable:!0},{key:"people",label:"ФИО",sortable:!0},{key:"department",label:"Подразделение",sortable:!0},{key:"actions",label:"",sortable:!1}],newPhoneFields:[{key:"phone",sortable:!0},{key:"contract",label:"Контракт"},{key:"state",label:"Состояние"}],peopleFields:[{key:"fio",label:"ФИО",type:"text"},{key:"account",label:"Уч. запись",type:"text"},{key:"department",label:"Подразделение",type:"text"},{key:"position",label:"Должность",type:"text"},{key:"adstate",label:"Состояние",type:"checkbox"},{key:"serviceaccount",label:"Сервисная уч. запись",type:"checkbox"}],test:{fio:{label:""},account:{label:""}},contractList:[{value:"395846009",text:"Beeline main 395846009"},{value:"512710831",text:"Beeline LC141 512710831"},{value:"154802955",text:"Megafon 154802955"}],stateList:[{value:ht.ACTIVE,text:"Активный"},{value:ht.INACTIVE,text:"Заблокированный"},{value:ht.EXCLUDED,text:"Исключен"},{value:ht.REISSUED,text:"Переоформлен"}],csvLabels:{phone:"Телефон",fio:"ФИО",department:"Подразделение",position:"Должность",state:"Состояние"},posts:[],updates:[],errors:[],errorCode:"",selected:[],history:[],infoModal:{id:"info-modal",title:"",content:""},peopleList:[],peopleListSelected:"",simplePhoneList:[],currentRow:[],newphoneid:-1,newphone:"",postRes:null,editPhoneMode:!1,filterEmptyPeople:!0,findPeople:!1}},computed:wt({},y["a"].mapGetters({phoneList:"PhoneListStore/getPhoneList",selectPeople:"PhoneListStore/getSelectPeople"}),{sortOptions:function(){return this.fields.filter((function(e){return e.sortable})).map((function(e){return{text:e.label,value:e.key}}))},pickerState:function(){return{highlighted:{dates:[new Date]},datenow:new Date}},isError:function(){return""!==this.errorCode},isOK:function(){return!(this.isError||!this.postRes)}}),watch:{phoneList:function(){this.generatePhoneList()},selectPeople:function(){this.detailrow&&(this.detailrow.item.people.people||(this.detailrow.item.people.fio=this.selectPeople.fio,this.detailrow.item.people.position=this.selectPeople.position,this.detailrow.item.people.department=this.selectPeople.department,this.detailrow.item.people.account=this.selectPeople.account,this.detailrow.item.people.adstate=this.selectPeople.adstate,this.detailrow.item.people.people=this.selectPeople.people,console.log(this.detailrow.item.people)),this.findPeople=!1)}},components:{Datepicker:et["a"],JsonCSV:rt.a,FindPeople:ct},mixins:[gt,vt],mounted:function(){console.log(this.filter,this.searchFilter),this.phoneList&&this.phoneList.length||this.loadPhoneList()},methods:{showDetail:function(e){this.peopleListSelected="",this.history=[],this.editPhoneMode=!1,this.postRes=null,this.findPeople=!1,this.detailrow&&this.detailrow.item["id"]!==e.item["id"]&&!this.detailrow.detailsShowing&&this.detailrow.toggleDetails(),e&&(e.toggleDetails(),e["field"]["showdetail"]=!e["field"]["showdetail"],this.detailrow=e,e.detailsShowing||(this.loadActiveHistory(e.item),this.history&&this.setButtonInVisibility(e.item["id"],!0)))},editPhone:function(e){this.peopleListSelected="",this.history=[],this.postRes=null,this.findPeople=!1,this.detailrow&&this.detailrow.item["id"]!==e.item["id"]&&!this.detailrow.detailsShowing&&this.detailrow.toggleDetails(),e.toggleDetails(),e["field"]["editphone"]=!e["field"]["editphone"],this.editPhoneMode=!e.detailsShowing,this.detailrow=e,e.detailsShowing},checkDetail:function(e){return!(!(e&&e.detailsShowing&&this.detailrow)||this.editPhoneMode||this.detailrow.index!==e.index)},checkEdit:function(e){return!!(e&&e.detailsShowing&&this.detailrow&&this.editPhoneMode&&this.detailrow.index===e.index)},showStatusIcon:function(e){return e&&this.detailrow&&e.detailsShowing&&this.detailrow.index===e.index?"~/assets/icons8-expand-arrow-40.png":"~/images/icons8-forward-40.png"},generateEmptyPeople:function(e){this.$set(e,"people",{fio:"",account:"",department:"",position:"",serviceaccount:"0",adstate:"0"});var t=new Date;return this.createbutton[e["id"]]=!0,this.$set(this.history,"datestart",t.toDateString()),this.loadPeopleList(),e},createPeople:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r={},n=new Date(this.history["datestart"]),a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0)),r["datestart"]=a.getTime(),r["phone"]=t,this.$store.dispatch("PhoneListStore/createAndSetPeople",r).then((function(e){if(e&&200===e.status)e.data&&(t["people"]=e.data,o.postRes=e.data),o.createbutton[t["id"]]=!1;else{o.postRes=null;var r=e.response;o.errorCode=r&&r.data&&r.data.code?e.data.code:"unknown_error"}})).catch((function(e){o.postRes=null,console.log("test error:",e,e.response);var t=e.response;o.errorCode=t&&t.data&&t.data.code?t.data.code:"unknown_error"}));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),createOrUpdatePhone:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.dispatch("PhoneListStore/createOrUpdatePhone",t).then((function(e){if(e&&200===e.status)e.data&&(t=e.data);else{var n=e.response;r.errorCode=n&&n.data&&n.data.code?e.data.code:"unknown_error"}}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkCreate:function(e){return!(!this.createbutton[e.item["id"]]||!0!==this.createbutton[e.item["id"]])},checkUpdate:function(e){return!(e.item["people"]&&!e.item["people"]["people"])&&(!this.createbutton[e.item["id"]]||!0!==this.createbutton[e.item["id"]])},checkUpdatePhone:function(e){return!!(e.item&&e.item["phone"]&&e.item["contract"])},setButtonInVisibility:function(e,t){this.$set(this.freebutton,e,t)},loadPhoneList:function(){this.$store.dispatch("PhoneListStore/loadPhoneList")},loadPeopleList:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("PhoneListStore/loadPeopleList");case 2:this.peopleList=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadActiveHistory:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("PhoneListStore/loadActiveHistory",t);case 2:r=e.sent,r&&(this.history=r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),findHistory:function(e){return console.log("finds: ",e,this.history[e]),history},updatePeople:function(e){var t=this,r={};r["history"]=this.history,r["history"]["people"]=e,this.$store.dispatch("PhoneListStore/updatePeopleAndHistory",r).then((function(e){if(e&&200===e.status);else{var r=e.response;t.errorCode=r&&r.data&&r.data.code?e.data.code:"unknown_error"}}))},freePhone:function(e){var t=this;this.$store.dispatch("PhoneListStore/freePhone",e).then((function(e){if(e&&200===e.status)t.postRes=e.data;else{var r=e.response;t.errorCode=r&&r.data&&r.data.code?e.data.code:"unknown_error"}}))},info:function(e,t,r){},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},containsPeopleKey:function(e){for(var t=Object.keys(this.peopleFields),r=0;r<t.length;r++)if(this.peopleFields[r].key===e)return!0;return!1},checkPeopleKeyType:function(e,t){for(var r=Object.keys(this.peopleFields),n=0;n<r.length;n++)if(this.peopleFields[n].key===e&&this.peopleFields[n].type===t)return!0;return!1},getPeopleFieldLabel:function(e){for(var t=Object.keys(this.peopleFields),r=0;r<t.length;r++)if(this.peopleFields[r].key===e)return this.peopleFields[r].label;return""},selectPeople:function(e){var t,r=this;this.peopleList.find((function(e){e.people===r.peopleListSelected&&(t=e)})),this.detailrow.item.people=t},rowClass:function(e,t){return this.getRowClass(e.state,e.people)},printDouble:function(e){return e?parseFloat(e.toFixed()).toLocaleString():0},print:function(e){return e||""},addPhone:function(){this.$store.dispatch("PhoneListStore/addEmptyPhone")},generatePhoneList:function(){var e=this;if(this.phoneList&&this.phoneList.length>0){var t=[];this.phoneList.forEach((function(r){var n,a,o,i=r["phone"],s=r["state"];if(r["people"])n=r["people"]["fio"],a=r["people"]["department"],o=r["people"]["position"];else if(e.filterEmptyPeople)return;t.push({phone:i,fio:n,department:a,position:o,state:s})})),this.simplePhoneList=t}else this.simplePhoneList=[]},syncADState:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:T("syncADState").then((function(e){t.loadPhoneList()})).catch((function(e){t.errors.push(e)}));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}},Ot=At,Pt=Object(st["a"])(Ot,We,$e,!1,null,null,null),St=Pt.exports;g["default"].use(qe["a"]);var kt={name:"phones",components:{PhonesList:St},data:function(){return{loading:!0,fields:["phone",{key:"people",label:"People"},{key:"department",label:"Department"}],posts:[],errors:[]}},methods:{callRestGet:function(e){var t=this;this.loading=!0,j.post(e).then((function(e){t.posts=e.data})).catch((function(e){t.errors.push(e)})),this.loading=!1}}},xt=kt,_t=Object(st["a"])(xt,Ze,Xe,!1,null,null,null),Dt=_t.exports,Ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container wrap",attrs:{id:"CashPhonesView"}},[r("CashPhones"),e.cashyearerrors.length?r("div",{attrs:{id:"error"}},[r("h3",[e._v(e._s(e.cashyearerrors))])]):e._e()],1)},Et=[],jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"CashPhonesComponent"}},[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[n("b-form-group",[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},on:{update:e.filterChange},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),n("b-input-group-append",{attrs:{size:"sm"}},[n("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")]),n("b-form-select",{attrs:{size:"sm",options:e.years},on:{change:function(t){return e.selectYear()}},model:{value:e.selectedyear,callback:function(t){e.selectedyear=t},expression:"selectedyear"}}),n("JsonCSV",{attrs:{data:e.phoneList,delimiter:";",name:"cashPhones.csv",bom:!0,labels:e.csvLabels}},[n("img",{attrs:{src:r("2793")}})])],1)],1)],1)],1)],1),e.updates.length?n("b-row",[e._v("\r\n                "+e._s(e.updates)+"\r\n              ")]):e._e(),e.errors.length?n("b-row",[e._v("\r\n                "+e._s(e.errors)+"\r\n              ")]):e._e(),n("b-row",[n("b-col",{attrs:{sm:"",cols:"6"}},[n("div",[n("b-navbar",[n("b-pagination",{attrs:{"total-rows":e.pagesCount,"per-page":e.phonesPerPage},model:{value:e.phonesPage,callback:function(t){e.phonesPage=t},expression:"phonesPage"}})],1),n("b-table",{staticClass:"h-25 d-inline-block",attrs:{items:e.filterPhoneList,fields:e.fields,"tbody-tr-class":e.rowClass,filter:e.localSearchFilter,striped:!0,small:!0,"sort-by":e.sortBy,"current-page":e.phonesPage,"per-page":e.phonesPerPage,"sort-desc":!0,selectable:"","selected-variant":"active","select-mode":"single"},on:{"row-selected":e.showDetail},scopedSlots:e._u([{key:"cell(3)",fn:function(t){return[n("b",{staticClass:"text-info"},[e._v(e._s(e.printDouble(t.value)))])]}},{key:"table-colgroup",fn:function(t){return e._l(t.fields,(function(e){return n("col",{key:e.key})}))}},{key:"cell(actions)",fn:function(t){return[n("b-button",{attrs:{size:"sm"},on:{click:t.toggleDetails}},[e._v("\r\n                  "+e._s(t.detailsShowing?"Hide":"Show")+" Details\r\n                ")])]}},{key:"row-details",fn:function(t){return[n("b-card",[n("b-container",{attrs:{size:"sm",fluid:""}},[e._l(t.item.people,(function(r,a){return n("span",{key:a,attrs:{value:r}},[e.checkPeopleKeyType(a,"text")?n("span",[n("b-row",{key:a,staticClass:"my-1"},[n("b-col",{attrs:{sm:"2"}},[n("label",{attrs:{for:""+a}},[e._v(e._s(a)+":")])]),n("b-col",[n("b-form-input",{attrs:{id:""+a,placeholder:""+r},model:{value:t.item.people[a],callback:function(r){e.$set(t.item.people,a,r)},expression:"row.item.people[key]"}})],1)],1)],1):e._e(),e.checkPeopleKeyType(a,"checkbox")?n("span",[n("b-row",{key:a,staticClass:"my-1"},[n("b-col",[n("label",{attrs:{for:""+a}},[e._v(e._s(a)+":")])]),n("b-col",{attrs:{align:"left"}},[n("b-form-checkbox",{key:""+a,attrs:{value:1,"unchecked-value":0},model:{value:t.item.people[a],callback:function(r){e.$set(t.item.people,a,r)},expression:"row.item.people[key]"}})],1)],1)],1):e._e()])})),n("b-row",[n("b-col",{attrs:{sm:"3"}},[n("b-button",{attrs:{align:"right",size:"sm"},on:{click:function(r){return e.updatePeople(t.item.people)}}},[e._v("\r\n                          Update\r\n                        ")])],1),e.history?n("span",[n("b-col",[n("Datepicker",{attrs:{"bootstrap-styling":!0},model:{value:e.history["datestart"],callback:function(t){e.$set(e.history,"datestart",t)},expression:"history['datestart']"}},[n("div",{staticClass:"calender-header",attrs:{slot:"beforeCalendarHeader"},slot:"beforeCalendarHeader"},[e._v("\r\n                              Choose a Date Start\r\n                            ")])])],1)],1):e._e()],1),n("b-row",[n("b-col",{attrs:{sm:"3"}},[n("b-button",{attrs:{id:t.item["id"],disabled:e.freebutton[t.item["id"]],align:"right",size:"sm"},on:{click:function(t){return e.freePhone(e.history)}}},[e._v("\r\n                              Free phone\r\n                            ")])],1),e.history?n("span",[n("b-col",[n("Datepicker",{attrs:{"bootstrap-styling":!0},on:{selected:function(r){return e.setButtonInVisibility(t.item["id"],!1)}},model:{value:e.history["dateend"],callback:function(t){e.$set(e.history,"dateend",t)},expression:"history['dateend']"}},[n("div",{staticClass:"calender-header",attrs:{slot:"beforeCalendarHeader"},slot:"beforeCalendarHeader"},[e._v("\r\n                              Choose a Date End\r\n                            ")])])],1)],1):e._e()],1)],2)],1)]}}])})],1)]),n("b-col",{attrs:{sm:"",cols:"6"}},[n("div",[n("b-navbar",[n("b-pagination",{attrs:{"total-rows":e.pagesDetailCount,"per-page":e.detailPerPage},model:{value:e.detailPage,callback:function(t){e.detailPage=t},expression:"detailPage"}}),n("JsonCSV",{attrs:{data:e.detail,delimiter:";",name:"phoneMonthDetail.csv",bom:!0}},[n("img",{attrs:{src:r("2793")}})])],1),n("b-table",{attrs:{items:e.detail,fields:e.detailfields,small:!0,"current-page":e.detailPage,"per-page":e.detailPerPage},scopedSlots:e._u([{key:"cell(2)",fn:function(t){return[e._v("\r\n                  "+e._s(e.printdate(t.item[2]))+"\r\n                ")]}}])})],1)])],1)],1)],1)},Tt=[];r("a481"),r("386d"),r("5df3"),r("1c4c");function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g["default"].use(qe["a"]);var Ut={data:function(){return{freebutton:[],fields:[{key:"0",label:"Phone",value:"Phone",sortable:!0},{key:"1",label:"ФИО",sortable:!0},{key:"2",label:"Подразделение",sortable:!0},{key:"3",label:"Сумма (год, без налогов)",value:"SUM (year)",sortable:!0}],detailfields:[{key:"0",label:"ФИО",sortable:!0},{key:"1",label:"Подразделение",sortable:!0},{key:"2",label:"Месяц",sortable:!0},{key:"3",label:"Сумма (без налогов)",sortable:!0}],peopleFields:[{key:"fio",label:"ФИО",type:"text"},{key:"account",label:"account",type:"text"},{key:"department",label:"department",type:"text"},{key:"position",label:"position",type:"text"},{key:"adstate",label:"adstate",type:"checkbox"},{key:"serviceaccount",label:"serviceaccount",type:"checkbox"}],csvLabels:{0:"Телефон",1:"ФИО",2:"Подразделение",3:"Сумма"},test:{fio:{label:""},account:{label:""}},posts:[],sortBy:"2",updates:[],errors:[],detailPerPage:12,phonesPerPage:12,phonesPage:1,detailPage:1,selected:[],history:[],detail:[],acthistory:[],selectedyear:this.getLastYear()}},computed:Rt({},y["a"].mapGetters({phoneList:"CashStore/getPhonesCash"}),{pagesCount:function(){return this.phoneList?this.phoneList.length:0},pagesDetailCount:function(){return this.detail?this.detail.length:0},sortOptions:function(){return this.fields.filter((function(e){return e.sortable})).map((function(e){return{text:e.label,value:e.key}}))},years:function(){var e=(new Date).getFullYear();return Array.from({length:4},(function(t,r){return e-3+r}))},filterPhoneList:function(){var e=this;if(!this.phoneList)return[];var t=this.phoneList.filter((function(t){if(JSON.stringify(t).search(e.localSearchFilter)>=0)return t}));return t}}),components:{Datepicker:et["a"],JsonCSV:rt.a},mixins:[vt],mounted:function(){this.selectYear()},created:function(){},methods:{showDetail:function(e){e&&e[0]&&e[0][0]&&this.loadCashDetail(e[0][0])},loadPhonesCash:function(){this.$store.dispatch("CashStore/loadPhonesCash")},selectYear:function(){this.$store.dispatch("CashStore/loadPhonesCash",this.selectedyear)},getLastMonth:function(){var e=(new Date).getMonth()+1;return e>1?e-1:12},getLastYear:function(){return 12===this.getLastMonth()?(new Date).getFullYear()-1:(new Date).getFullYear()},loadCashDetail:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("phone",t),r.append("year",this.selectedyear),e.next=5,this.$store.dispatch("CashStore/loadCashDetail",r);case 5:this.detail=e.sent;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),printdate:function(e){var t=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],r=new Date(e);return r.getFullYear()+": "+t[r.getMonth()]},containsPeopleKey:function(e){for(var t=Object.keys(this.peopleFields),r=0;r<t.length;r++)if(this.peopleFields[r].key===e)return!0;return!1},checkPeopleKeyType:function(e,t){for(var r=Object.keys(this.peopleFields),n=0;n<r.length;n++)if(this.peopleFields[n].key===e&&this.peopleFields[n].type===t)return!0;return!1},rowClass:function(e,t){if(e&&e.people&&1!==e.people["serviceaccount"])return 0===e.people["adstate"]?"table-danger":void 0},printDouble:function(e){return e?parseFloat(e.toFixed()).toLocaleString():0},convertDoubleToComma:function(e){return e?e.replace(".",","):0}}},It=Ut,Ft=Object(st["a"])(It,jt,Tt,!1,null,null,null),Ht=Ft.exports,Mt={name:"cashPhonesView",components:{CashPhones:Ht},data:function(){return{cashyear:[],cashyearerrors:[]}}},Yt=Mt,Nt=Object(st["a"])(Yt,Ct,Et,!1,null,null,null),zt=Nt.exports,Vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container wrap",attrs:{id:"CashYearDepartment"}},[r("br"),r("CashYearDepartment"),e.cashyearerrors.length?r("div",{attrs:{id:"error"}},[r("h3",[e._v(e._s(e.cashyearerrors))])]):e._e()],1)},Gt=[],Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-select",{attrs:{size:"sm",options:e.years},on:{change:function(t){return e.getCashYearDepartment()}},model:{value:e.selectedyear,callback:function(t){e.selectedyear=t},expression:"selectedyear"}}),n("JsonCSV",{attrs:{data:e.cashDepartment,delimiter:";",name:"cashDeparment.csv",bom:!0,labels:e.csvLabels}},[n("img",{attrs:{src:r("2793")}})])],1),n("p"),n("b-table",{attrs:{items:e.cashDepartment,fields:e.fields,small:!0,"sort-by":1,"sort-desc":!0,selectable:"","selected-variant":"active","select-mode":"single"},scopedSlots:e._u([{key:"cell(1)",fn:function(t){return[n("b",{staticClass:"text-info"},[e._v(e._s(t.value.toFixed(2)))])]}}])})],1)},Jt=[];function Qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g["default"].use(qe["a"]);var Zt={data:function(){return{fields:[{key:"0",label:"Подразделение",sortable:!0},{key:"1",label:"Сумма, руб (год, без налогов)",sortable:!0}],csvLabels:{0:"Подразделение",1:"Сумма"},posts:[],errors:[],selectedyear:this.getLastYear()}},computed:Kt({},y["a"].mapGetters({cashDepartment:"CashStore/getCashYearDepart"}),{years:function(){var e=(new Date).getFullYear();return Array.from({length:4},(function(t,r){return e-3+r}))}}),mounted:function(){this.getCashYearDepartment()},components:{JsonCSV:rt.a},methods:{getLastMonth:function(){var e=(new Date).getMonth()+1;return e>1?e-1:12},getLastYear:function(){return 12===this.getLastMonth()?(new Date).getFullYear()-1:(new Date).getFullYear()},getCashYearDepartment:function(){var e=new FormData;e.append("year",this.selectedyear),this.$store.dispatch("CashStore/loadCashYearDepart",e)}}},Xt=Zt,qt=Object(st["a"])(Xt,Bt,Jt,!1,null,null,null),Wt=qt.exports,$t={name:"cash",components:{CashYearDepartment:Wt},data:function(){return{cashyear:[],cashyearerrors:[]}},methods:{}},er=$t,tr=Object(st["a"])(er,Vt,Gt,!1,null,null,null),rr=tr.exports,nr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container wrap",attrs:{id:"CashMonthView"}},[r("br"),r("CashMonth"),e.cashyearerrors.length?r("div",{attrs:{id:"error"}},[r("h3",[e._v(e._s(e.cashyearerrors))])]):e._e()],1)},ar=[],or=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-navbar",{attrs:{size:"sm"}},[n("b-nav-form",[n("b-form-select",{attrs:{size:"sm",options:e.months},on:{change:function(t){return e.getCashMonth()}},model:{value:e.selectedmonth,callback:function(t){e.selectedmonth=t},expression:"selectedmonth"}}),n("b-form-select",{attrs:{size:"sm",options:e.years},on:{change:function(t){return e.getCashMonth()}},model:{value:e.selectedyear,callback:function(t){e.selectedyear=t},expression:"selectedyear"}})],1),n("b-btn",{attrs:{size:"sm"},on:{click:function(t){return e.getCashMonth()}}},[e._v("Сформировать отчет")]),n("JsonCSV",{attrs:{data:e.exportCashMonth,labels:e.csvlabels,delimiter:";",name:"cashMonth.csv",bom:!0}},[n("img",{attrs:{src:r("2793")}})]),n("b-btn",{attrs:{size:"sm"},on:{click:function(t){return e.sendToEMail()}}},[e._v("Отправить по почте")])],1),n("p"),n("b-table",{attrs:{items:e.cashMonth,fields:e.fields,small:!0,"sort-by":e.sortBy,"sort-desc":!0,selectable:"","selected-variant":"active","select-mode":"single"},scopedSlots:e._u([{key:"cell(3)",fn:function(t){return[n("b",{staticClass:"text-info"},[e._v(e._s(t.value.toFixed(2)))])]}}])})],1)},ir=[];r("6b54"),r("28a5");function sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g["default"].use(qe["a"]);var cr={data:function(){return{fields:[{key:"0",label:"Телефон",sortable:!0},{key:"1",label:"ФИО",sortable:!0},{key:"2",label:"Подразделение",sortable:!0},{key:"3",label:"Сумма, руб \n(без налогов)",sortable:!0}],csvlabels:{phone:"Телефон",fio:"ФИО",department:"Подразделение",sum:"Сумма, руб (без налогов)"},posts:[],errors:[],selectedyear:this.getLastYear(),selectedmonth:this.getLastMonth(),exportCashMonth:[],exportTemplate:"phone,fio,department,sum",exportTypes:{sum:"double"},sortBy:"3",exportSkipZero:!0}},watch:{cashMonth:function(){this.generateExportCashMonth(this.cashMonth,this.exportTemplate,this.exportTypes,this.exportSkipZero)}},computed:lr({},y["a"].mapGetters({cashMonth:"CashStore/getCashMonth"}),{years:function(){var e=(new Date).getFullYear();return Array.from({length:4},(function(t,r){return e-3+r}))},months:function(){return Array.from({length:12},(function(e,t){return 1+t}))}}),mounted:function(){this.cashMonth.length||this.getCashMonth()},methods:{loadCashYear:function(e){},getLastMonth:function(){var e=(new Date).getMonth()+1;return e>1?e-1:12},getLastYear:function(){return 12===this.getLastMonth()?(new Date).getFullYear()-1:(new Date).getFullYear()},getCashMonth:function(){var e=new FormData;e.append("year",this.selectedyear),e.append("month",this.selectedmonth),this.$store.dispatch("CashStore/loadCashMonth",e)},generateExportCashMonth:function(e,t,r,n){if(t&&e)if(e&&e.length>0){var a=[],o=t.split(",");e.forEach((function(e){var t=0,n={},i=!1;o.forEach((function(a){var o=e[t];if(r&&r[a])switch(r[a]){case"double":0===o&&(i=!0),o=o.toString().replace(".",",");break;default:}n[a]=o,t++})),i||a.push(n)})),this.exportCashMonth=a}else this.exportCashMonth=[]},sendToEMail:function(){var e=new FormData;e.append("year",this.selectedyear),e.append("month",this.selectedmonth),R("sendCashToEMail",e)}},components:{JsonCSV:rt.a}},ur=cr,pr=Object(st["a"])(ur,or,ir,!1,null,null,null),hr=pr.exports,fr={name:"cash",components:{CashMonth:hr},data:function(){return{cashyear:[],cashyearerrors:[]}},methods:{}},dr=fr,mr=Object(st["a"])(dr,nr,ar,!1,null,null,null),br=mr.exports,vr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-row",[r("b-col",[r("div",{staticClass:"align-center"},[r("b-form-group",{staticClass:"no-margin-bottom"},[r("b-form-radio-group",{attrs:{"button-variant":"outline-secondary",options:e.importTypes,name:"importTypes",buttons:""},model:{value:e.importTypeSelected,callback:function(t){e.importTypeSelected=t},expression:"importTypeSelected"}}),r("b-form-select",{attrs:{options:e.years},model:{value:e.selectedyear,callback:function(t){e.selectedyear=t},expression:"selectedyear"}})],1)],1)])],1),r("b-row",[r("b-col",[r("ImportComponent",{attrs:{year:e.selectedyear,importType:e.importTypeNumeric,importTypeSelected:e.importTypeSelected}})],1)],1)],1),r("ImportHistory",{attrs:{year:e.selectedyear,importType:e.importTypeNumeric}}),r("ImportInfo")],1)},gr=[],yr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{fluid:""}},[r("b-table",{attrs:{small:"",items:e.importList,fields:e.fields},scopedSlots:e._u([{key:"cell(1)",fn:function(t){return[e._v("\r\n      "+e._s(e.formatDate(t.item[1]))+"\r\n    ")]}},{key:"cell(3)",fn:function(t){return[e._v("\r\n      "+e._s(t.item[3].toFixed(2))+"\r\n    ")]}}])})],1)},wr=[];function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g["default"].use(qe["a"]);var Pr={data:function(){return{fields:[{key:"0",label:"Contract",sortable:!0},{key:"1",label:"Date",sortable:!0},{key:"2",label:"Count",sortable:!0},{key:"3",label:"SUM",sortable:!0}]}},computed:Or({},y["a"].mapGetters({importList:"ImportStore/getContractCashDetail",CSRF:"GlobalStore/getCSRF"}),{CSRFValue:function(){return this.CSRF&&this.CSRF.length?this.CSRF:""},isLoadedOptions:function(){return!(!this.CSRFValue||!this.CSRFValue.length)}}),mounted:function(){this.importList&&this.importList.length||this.$store.dispatch("ImportStore/loadImportStatus")},watch:{isLoadedOptions:function(e){e&&!0===e&&(this.importList&&this.importList.length||this.$store.dispatch("ImportStore/loadImportStatus"))}},methods:{formatDate:function(e){var t=new Date(e),r={year:"numeric",month:"long"};return t.toLocaleDateString("ru-RU",r)}}},Sr=Pr,kr=Object(st["a"])(Sr,yr,wr,!1,null,null,null),xr=kr.exports,_r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"no-padding"},[r("b-progress",{staticClass:"align-center",attrs:{max:100,value:e.fileProgress}}),r("b-form-group",{staticClass:"align-center"},[r("b-form-select",{attrs:{options:e.charsets},model:{value:e.selectedcharset,callback:function(t){e.selectedcharset=t},expression:"selectedcharset"}}),r("b-form-file",{class:e.redText,attrs:{state:Boolean(e.file),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),r("div",{staticClass:"mt-3",class:e.redText},[e._v("\n      Selected file: "+e._s(e.file?e.file.name:"")+"\n      "),e.fileAlreadyUpload?r("span",[e._v("\n         Already Uploaded!\n      ")]):e._e()]),r("b-button",{on:{click:function(t){return e.fileUpload()}}},[e._v("Upload")]),r("b-button",{on:{click:function(t){return e.test()}}},[e._v("Test Upload")])],1)],1)},Dr=[],Cr=(r("7f7f"),r("c5f6"),{name:"ImportComponent",components:{},data:function(){return{file:null,fileUploadActive:!1,fileProgress:-1,fileUploadProgress:0,importFileTypeSelected:["csv"],importFileTypes:[{value:"csv",text:".csv"},{value:"dbf",text:".dbf"}],importTypes:[{value:"cash",text:"Начисления"},{value:"detail",text:"Детализация"},{value:"phonestariff",text:"Информация о тарифах"},{value:"services",text:"Информация о услугах"}],selectedyear:dt(),charsets:[{value:"windows-1251",text:"WINDOWS-1251"},{value:"utf-8",text:"UTF-8"}],selectedcharset:"windows-1251",fileAlreadyUpload:!1}},props:{importType:Number,year:Number,importTypeSelected:String},computed:{years:function(){var e=(new Date).getFullYear();return Array.from({length:4},(function(t,r){return e-3+r}))},redText:function(){return this.file&&(this.checkFileName(),console.log("redText file",this.file.name,this.year,this.fileAlreadyUpload)),!0===this.fileAlreadyUpload?(console.log("redText",this.fileAlreadyUpload),"redText"):""}},mounted:function(){},watch:{fileProgress:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.fileUploadActive){e.next=5;break}return r={progress:t},n=this,e.next=5,R("getFileUploadProgress",{progress:r}).then((function(e){var r=e.data["progress"];r&&r>t&&(n.fileProgress=r)}));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},methods:{fileUpload:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t="",e.t0=this.importTypeSelected,e.next="cash"===e.t0?4:"detail"===e.t0?6:"phonestariff"===e.t0?8:"services"===e.t0?10:"checkExcludedPhones"===e.t0?12:14;break;case 4:return t="fileUploadPhoneCash",e.abrupt("break",15);case 6:return t="fileUploadPhoneDetail",e.abrupt("break",15);case 8:return t="loadPhonesTariff",e.abrupt("break",15);case 10:return t="loadServices",e.abrupt("break",15);case 12:return t="checkExcludedPhones",e.abrupt("break",15);case 14:return e.abrupt("return");case 15:return this.fileUploadActive=!0,this.fileProgress=0,r=new FormData,r.append("charset",this.selectedcharset),r.append("year",this.selectedyear),r.append("file",this.file),e.next=23,R(t,r).then((function(){})).catch((function(e){console.log("file upload error: ",e)}));case 23:this.fileUploadActive=!1,this.fileProgress=-1,this.loadCashDetail(),this.$store.dispatch("ImportStore/updateLastUploadDate");case 27:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),test:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new FormData,t.append("year",this.selectedyear),t.append("file",this.file),e.next=5,R("test",t,{headers:{"Content-Type":"multipart/form-data;charset=windows-1251"}}).then((function(){})).catch((function(e){console.log("file upload error: ",e)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadCashDetail:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.dispatch("ImportStore/loadImportStatus");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectImportType:function(){switch(this.importTypeSelected){case"cash":this.importType=1;break;case"detail":this.importType=2;break;case"phonestariff":this.importType=3;break;default:}},checkFileName:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.file){e.next=7;break}return t=new FormData,t.append("filename",this.file.name),t.append("year",this.year),e.next=6,this.$store.dispatch("ImportStore/checkFileName",t);case 6:this.fileAlreadyUpload=e.sent;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}),Er=Cr,jr=(r("feda"),Object(st["a"])(Er,_r,Dr,!1,null,null,null)),Tr=jr.exports,Lr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{fluid:""}},[r("b-table",{attrs:{small:"",items:e.importHistory,fields:e.fields},scopedSlots:e._u([{key:"cell(importDate)",fn:function(t){return[e._v("\r\n      "+e._s(e.formatDate(t.item["importDate"]))+"\r\n    ")]}},{key:"cell(month)",fn:function(t){return[e._v("\r\n      "+e._s(e.formatMonth(t.item["month"]))+"\r\n    ")]}}])})],1)},Rr=[];function Ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ir(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g["default"].use(qe["a"]);var Fr={data:function(){return{fields:[{key:"fileName",label:"Имя файла",sortable:!0},{key:"importDate",label:"Дата импорта",sortable:!0},{key:"recordCount",label:"Записей в файле",sortable:!0},{key:"recordWrite",label:"Записанно записей",sortable:!0},{key:"month",label:"Месяц",sortable:!0}]}},props:{importType:Number,year:Number},computed:Ir({},y["a"].mapGetters({importHistory:"ImportStore/getImportHistory",importLastUploadDate:"ImportStore/getLastUploadDate"})),mounted:function(){this.importHistory&&this.importHistory.length||this.loadData()},watch:{isLoadedOptions:function(e){e&&!0===e&&(this.importHistory&&this.importHistory.length||this.loadData())},year:function(){this.loadData()},importType:function(){this.loadData()}},methods:{formatDate:function(e){var t=new Date(e),r={year:"numeric",month:"long"};return t.toLocaleDateString("ru-RU",r)},formatMonth:function(e){var t=new Date(e),r={month:"long"};return t.toLocaleDateString("ru-RU",r)},loadData:function(){var e=new FormData;e.append("year",this.year),e.append("type",this.importType),this.$store.dispatch("ImportStore/loadImportHistory",e)}}},Hr=Fr,Mr=Object(st["a"])(Hr,Lr,Rr,!1,null,null,null),Yr=Mr.exports,Nr={name:"ImportView",components:{ImportInfo:xr,ImportComponent:Tr,ImportHistory:Yr},data:function(){return{importTypeSelected:"cash",importTypes:[{value:"cash",text:"Начисления"},{value:"detail",text:"Детализация"},{value:"phonestariff",text:"Информация о тарифах"},{value:"checkExcludedPhones",text:"Сверка переоформленных"},{value:"services",text:"Информация о сервисах"}],selectedyear:dt()}},computed:{years:function(){var e=(new Date).getFullYear();return Array.from({length:4},(function(t,r){return e-3+r}))},importTypeNumeric:function(){switch(this.importTypeSelected){case"cash":return 1;case"detail":return 2;case"phonestariff":return 3;case"services":return 4;case"checkExcludedPhones":return 5;default:return 0}}}},zr=Nr,Vr=(r("23e9"),Object(st["a"])(zr,vr,gr,!1,null,null,null)),Gr=Vr.exports,Br=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("DetailAnalize")],1)},Jr=[],Qr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{fluid:""}},[r("br"),r("b-container",[r("b-form-group",[e.updateActive?r("b-progress",{attrs:{max:100,value:e.updateProgress}}):e._e(),r("b-form-select",{attrs:{options:e.monthList},on:{change:function(t){return e.loadDetailAnalize(e.monthSelected)}},model:{value:e.monthSelected,callback:function(t){e.monthSelected=t},expression:"monthSelected"}})],1)],1),r("b-table",{attrs:{small:"",items:e.detailanalize,fields:e.fields,selectable:"","selected-variant":"active","select-mode":"single"},scopedSlots:e._u([{key:"cell(0)",fn:function(t){return[e._v("\r\n      "+e._s(t.item["phone"]["phone"])+"\r\n      "),t.item["phone"]["people"]?r("span",[e._v("\r\n        "+e._s(t.item["phone"]["people"]["fio"])+"\r\n        ")]):e._e()]}},{key:"cell(optimalTariff)",fn:function(t){return[t.item["optimalTariff"]?r("span",[e._v("\r\n      "+e._s(t.item["optimalTariff"]["tariff"]["name"])+"\r\n      ")]):e._e()]}},{key:"cell(economy)",fn:function(t){return[e._v("\r\n      "+e._s(t.item["economi"].toFixed())+"\r\n    ")]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{attrs:{size:"sm"},on:{click:t.toggleDetails}},[e._v("\r\n        "+e._s(t.detailsShowing?"Hide":"Show")+" Details\r\n      ")])]}},{key:"row-details",fn:function(t){return[r("b-container",e._l(t.item["tariffDetails"],(function(t,n){return r("span",{key:n,attrs:{value:t}},[r("b-row",[r("b-col",[e._v("\r\n          "+e._s(t["detailminutes"].toFixed(2))+" min\r\n        ")]),r("b-col",[e._v("\r\n          "+e._s(t["detailcost"].toFixed(2))+" rub\r\n        ")]),r("b-col",[e._v("\r\n          "+e._s(t["tariff"]["name"])+"\r\n          (m:"+e._s(t["tariff"]["minutes"])+" -\r\n           p:"+e._s(t["tariff"]["cost"])+")\r\n        ")])],1)],1)})),0)]}}])}),r("br"),e._v("\r\n  "+e._s(e.fulleconomy.toFixed())+"\r\n  "),r("br")],1)},Kr=[];function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g["default"].use(qe["a"]);var qr={data:function(){return{fields:[{key:"0",label:"FIO",sortable:!0},{key:"currentCash",label:"CurrentCash",sortable:!0},{key:"optimalTariff",label:"optimal",sortable:!0},{key:"economy",label:"Economy",sortable:!0},{key:"3",label:"Detail",sortable:!0},{key:"actions",label:"Actions"}],detailanalize:[],monthList:[{value:1,text:"Jan"},{value:2,text:"Feb"},{value:3,text:"March"},{value:4,text:"April"},{value:5,text:"May"},{value:6,text:"June"},{value:7,text:"July"},{value:8,text:"August"},{value:9,text:"September"},{value:10,text:"October"},{value:11,text:"November"},{value:12,text:"Decemver"}],monthSelected:3,updateProgress:-1,updateActive:!1}},computed:Xr({},y["a"].mapGetters({importList:"ImportStore/getContractCashDetail"}),{fulleconomy:function(){return this.detailanalize?this.countFullEcomony():0}}),mounted:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.detailanalize&&this.detailanalize.length||this.loadDetailAnalize(this.monthSelected);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{formatDate:function(e){var t=new Date(e),r={year:"numeric",month:"long"};return t.toLocaleDateString("ru-RU",r)},countFullEcomony:function(){var e=0;return this.detailanalize.forEach((function(t,r,n){e+=t.economi})),e},loadDetailAnalize:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.updateActive=!0,this.updateProgress=0,console.log("loadDetailAnalize"),r={progress:t},e.next=6,j.post("analizePhoneDetailTariffsMonth",{progress:r});case 6:n=e.sent,this.detailanalize=n.data,console.log(this.detailanalize),this.updateActive=!1,this.updateProgress=-1;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},watch:{updateProgress:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.updateActive){e.next=5;break}return t={progress:t},r=this,e.next=5,j.post("getDetailAnalizeProgress",{progress:t}).then((function(e){var t=e.data["progress"];t&&t>r.updateProgress&&(r.updateProgress=t)}));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},Wr=qr,$r=Object(st["a"])(Wr,Qr,Kr,!1,null,null,null),en=$r.exports,tn={name:"DetailMonthView",components:{DetailAnalize:en}},rn=tn,nn=Object(st["a"])(rn,Br,Jr,!1,null,null,null),an=nn.exports,on=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("DetailAnalizeYear")],1)},sn=[],ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{fluid:""}},[n("br"),n("b-container",[n("b-form-group",[e.restLoadData?n("b-progress",{attrs:{max:100,value:e.localprogress}}):e._e()],1)],1),n("b-table",{attrs:{small:"",items:e.detailanalize,fields:e.fields,selectable:"","selected-variant":"active","select-mode":"single","tbody-tr-class":e.rowClass},scopedSlots:e._u([{key:"cell(0)",fn:function(t){return[e._v("\r\n      "+e._s(t.item["phone"]["phone"])+"\r\n      "),t.item["phone"]["people"]?n("span",{attrs:{title:e.getStateName(t.item.phone.state)}},[e._v("\r\n        "+e._s(t.item["phone"]["people"]["fio"])+"\r\n        ")]):e._e()]}},{key:"cell(contract)",fn:function(t){return[e._v("\r\n      "+e._s(t.item.phone.contract)+"\r\n    ")]}},{key:"cell(tariff)",fn:function(t){return[e._v("\r\n      "+e._s(t.item["phone"]["tariff"])+"\r\n      ")]}},{key:"cell(optimalTariff)",fn:function(t){return[t.item["optimalTariff"]&&t.item["phone"]["tariff"]&&t.item["phone"]["tariff"]==t.item["optimalTariff"]["code"]?n("span",{staticClass:"optimalTariff"},[e._v("\r\n        "+e._s(e.print(t.item["optimalTariff"]["name"]))+"\r\n      ")]):e._e(),t.item["optimalTariff"]&&t.item["phone"]["tariff"]!=t.item["optimalTariff"]["code"]?n("span",[e._v("\r\n        "+e._s(e.print(t.item["optimalTariff"]["name"]))+"\r\n      ")]):e._e()]}},{key:"cell(economy)",fn:function(t){return[t.item["economy"]?n("span",[e._v("\r\n        "+e._s(t.item["economy"].toFixed())+"\r\n      ")]):e._e()]}},{key:"cell(actions)",fn:function(e){return[n("b-button",{attrs:{size:"sm",variant:"outline-light"},on:{click:e.toggleDetails}},[e.detailsShowing?n("img",{attrs:{src:r("2d86"),width:"15px;"}}):n("img",{attrs:{src:r("aa91"),width:"15px;"}})])]}},{key:"row-details",fn:function(t){return[n("div",[n("h4",[e._v("\r\n        Начисления за год:\r\n        "+e._s(e.print(t.item["currentCash"]))+" руб\r\n        "),n("br")]),n("b-table-simple",{attrs:{borderless:!1,hover:"",fixed:"",small:""}},e._l(t.item["tariffs"],(function(r,a){return n("b-tbody",{key:r},[0==a?e._t("default",[n("b-tr",[n("b-th",[e._v("Tariff Name")]),e._l(t.item["tariffDetailYears"]["tariffDetails"][a],(function(t,r){return n("b-th",{key:t},[e.monthList[e.getDateIndex(r)]?n("p",[e._v("\r\n                "+e._s(e.print(e.monthList[e.getDateIndex(r)].text))+"\r\n              ")]):e._e()])}))],2)]):e._e(),n("b-tr",[n("b-th",[e._v("\r\n          "+e._s(e.print(r["name"]))+"\r\n        ")]),e._l(t.item["tariffDetailYears"]["tariffDetails"][a],(function(r,o){return n("b-th",{key:o},[n("br"),e._v(e._s(e.printDouble(t.item["tariffDetailYears"]["currentCash"][e.getDateIndex(o)]))+" р\r\n          "),n("br"),e._v(e._s(e.printDouble(t.item.tariffDetailYears.tariffDetails[a][e.getDateIndex(o)].detailminutes))+" м\r\n          "),n("br"),e._v(e._s(e.printDouble(t.item.tariffDetailYears.tariffDetails[a][e.getDateIndex(o)].detailcost))+" р\r\n        ")])}))],2)],2)})),1)],1)]}}],null,!0)}),n("br"),n("h4",[e._v("Итого экономия за год: "+e._s(e.printDouble(e.fulleconomy))+" рублей\r\n  ")]),n("br")],1)},cn=[];function un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?un(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g["default"].use(qe["a"]);var hn={data:function(){return{fields:[{key:"0",label:"FIO",sortable:!0},{key:"contract",label:"Договор",sortable:!0},{key:"tariff",label:"Тариф",sortable:!0},{key:"optimalTariff",label:"Опт. тариф",sortable:!0},{key:"economy",label:"Экономия",sortable:!0},{key:"actions",label:""}],monthList:[{value:0,text:"Jan"},{value:1,text:"Feb"},{value:2,text:"March"},{value:3,text:"April"},{value:4,text:"May"},{value:5,text:"June"},{value:6,text:"July"},{value:7,text:"August"},{value:8,text:"September"},{value:9,text:"October"},{value:10,text:"November"},{value:11,text:"Decemver"}],selectedyear:dt(),monthSelected:3,updateProgress:-1,updateActive:!1,oldprogress:0}},mixins:[gt],computed:pn({},y["a"].mapGetters({detailanalize:"DetailStore/getDetailAnalizeYear"}),{},y["a"].mapGetters({restLoadData:"GlobalStore/getRestLoadData",progress:"GlobalStore/getProgress"}),{fulleconomy:function(){return this.detailanalize?this.countFullEcomony():0},localprogress:function(){return this.restLoadData?(this.loadProgress(),mt(1e3),this.progress):0}}),mounted:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.detailanalize&&this.detailanalize.length||this.loadDetailAnalize(this.selectedyear);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{},methods:{formatDate:function(e){var t=new Date(e),r={year:"numeric",month:"long"};return t.toLocaleDateString("ru-RU",r)},getDateIndex:function(e){var t=new Date,r=t.getMonth()+e;return r>11&&(r-=12),r},countFullEcomony:function(){var e=0;return this.detailanalize&&this.detailanalize.length&&this.detailanalize.forEach((function(t,r,n){e+=t.economy})),e},rowClass:function(e,t){return this.getRowClass(e.phone.state,e.phone.people)},printDouble:function(e){return e?parseFloat(e.toFixed()).toLocaleString():0},print:function(e){return e||""},loadDetailAnalize:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.updateActive=!0,this.updateProgress=0,r=new FormData,r.append("year",t),this.$store.dispatch("DetailStore/getDetailAnalizeYear",r),this.updateActive=!1,this.updateProgress=-1;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadProgress:function(){this.$store.dispatch("GlobalStore/updateProgress","getDetailAnalizeProgress",this.progress)}}},fn=hn,dn=Object(st["a"])(fn,ln,cn,!1,null,null,null),mn=dn.exports,bn={name:"DetailYearView",components:{DetailAnalizeYear:mn}},vn=bn,gn=Object(st["a"])(vn,on,sn,!1,null,null,null),yn=gn.exports,wn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container p-0",attrs:{id:"HistoryView"}},[r("HistoryCashAnalize"),e.cashyearerrors.length?r("div",{attrs:{id:"error"}},[r("h3",[e._v(e._s(e.cashyearerrors))])]):e._e()],1)},An=[],On=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pl-0",attrs:{id:"HistoryCashAnalizeComponent"}},[r("div",{staticClass:"p-0",attrs:{id:"nav"}},[r("b-container",{staticClass:"p-0"},[r("b-row",[r("b-col",[r("b-navbar",{attrs:{toggleable:"lg",type:"light",variant:"light"}},[r("b-navbar-nav",[r("b-form-tags",{staticClass:"mb-2",attrs:{size:"sm",placeholder:"Множественный поиск (И)"},model:{value:e.tagsSelected,callback:function(t){e.tagsSelected=t},expression:"tagsSelected"}})],1)],1)],1)],1),r("b-row",{staticClass:"h-25"},[r("b-col",[r("b-navbar",{attrs:{toggleable:"lg",type:"light",variant:"light"}},[r("b-navbar-nav",[r("b-nav-form",[r("b-input-group",{attrs:{size:"sm"}},[r("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},on:{update:e.filterChange},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),r("b-input-group-append",{attrs:{size:"sm"}},[r("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")])],1),r("b-form-radio-group",{attrs:{size:"sm","button-variant":"outline-secondary",options:e.filterOptions,buttons:""},model:{value:e.filterSelected,callback:function(t){e.filterSelected=t},expression:"filterSelected"}})],1)],1)],1),r("b-navbar-nav",{staticClass:"ml-auto",attrs:{right:""}},[r("b-nav-form")],1)],1)],1)],1)],1)],1),r("b-table",{attrs:{sm:"",striped:"",items:e.historyCashAnalize,fields:e.fields,"tbody-tr-class":e.rowClass,"sort-compare":e.sortCompare,filter:e.complexFilter,"filter-function":e.emptyFilter,fixed:""},scopedSlots:e._u([{key:"table-colgroup",fn:function(t){return e._l(t.fields,(function(e){return r("col",{key:e.key,style:{width:e.width?e.width:"100px"}})}))}},{key:"cell(0)",fn:function(t){return[e._v("\r\n      "+e._s(t.value.phone)+"\r\n    ")]}},{key:"cell(fio)",fn:function(t){return[t.item[1]&&t.item[1]["people"]?r("span",[r("span",{attrs:{title:e.getStateName(t.item[0].state)}},[e._v("\r\n          "+e._s(t.item[1]["people"]["fio"])+"\r\n        ")])]):t?r("span",[e._v("\r\n        "+e._s(e.getStateName(t.item[0].state))+"\r\n      ")]):e._e()]}},{key:"cell(services)",fn:function(t){return[t.item[1]&&t.item[1]["phone"]&&t.item[1]["phone"]["services"]?r("span",[e._v("\r\n        "+e._s(e.printServices(t.item[1]["phone"]["services"]))+"\r\n      ")]):e._e()]}},{key:"cell(department)",fn:function(t){return[t.item[1]&&t.item[1]["people"]?r("span",[e._v("\r\n        "+e._s(e.print(t.item[1]["people"]["department"]))+"\r\n      ")]):e._e()]}},{key:"cell(datestart)",fn:function(t){return[t.item[1]?r("span",[e._v("\r\n        "+e._s(e.formatDate(t.item[1]["datestart"]))+"\r\n      ")]):e._e()]}},{key:"cell(dateend)",fn:function(t){return[t.item[1]?r("span",[e._v("\r\n        "+e._s(e.formatDate(t.item[1]["dateend"]))+"\r\n      ")]):e._e()]}},{key:"cell(duration)",fn:function(t){return[t.item[1]?r("span",[e._v("\r\n        "+e._s(t.item[1]["duration"]=e.countDuration(t.item[1]["datestart"],t.item[1]["dateend"]))+"\r\n      ")]):e._e()]}},{key:"cell(2)",fn:function(t){return[e._v("\r\n      "+e._s(e.printDouble(t.value))+"\r\n    ")]}},{key:"cell(3)",fn:function(t){return[e._v("\r\n      "+e._s(e.printDouble(t.value))+"\r\n    ")]}},{key:"cell(4)",fn:function(t){return[e._v("\r\n      "+e._s(e.printDouble(t.value))+"\r\n    ")]}}])})],1)},Pn=[];function Sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g["default"].use(qe["a"]);var xn={data:function(){return{fields:[{key:"0",label:"Телефон",sortable:!0},{key:"fio",label:"ФИО",width:"150px",sortable:!0},{key:"department",label:"Подразделение",width:"160px",sortable:!0},{key:"datestart",label:"Дата начала",sortable:!0},{key:"dateend",label:"Дата окончания",sortable:!0},{key:"duration",label:"Длит.",sortable:!0},{key:"services",label:"Услуги",width:"350px",sortable:!0},{key:"2",label:"1 мес",sortable:!0},{key:"3",label:"6 мес",sortable:!0},{key:"4",label:"1 год",sortable:!0}],filterSelected:"full",filterOptions:[{value:"full",text:"Выданные"},{value:"empty",text:"Не выданные"},{value:"all",text:"Все"}],tagsSelected:[]}},computed:kn({},y["a"].mapGetters({historyCashAnalize:"HistoryStore/getHistoryCashAnalize"}),{complexFilter:function(){return this.localSearchFilter+","+this.filterSelected}}),watch:{},mounted:function(){this.historyCashAnalize&&this.historyCashAnalize.length||this.loadData()},mixins:[gt,vt],methods:{print:function(e){return e||""},printDouble:function(e){return e?parseFloat(e.toFixed()).toLocaleString():0},checkAvailable:function(e){},formatDate:function(e){if(!e)return"";var t=new Date(e),r={year:"numeric",month:"long"};return t.toLocaleDateString("ru-RU",r)},formatMonth:function(e){var t=new Date(e),r={month:"long"};return t.toLocaleDateString("ru-RU",r)},loadData:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("HistoryStore/loadHistoryCashAnalize");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rowClass:function(e,t){var r=e[0]&&e[0].people?e[0].people:null,n=e[0]&&e[0].state?e[0].state:null,a=e[1]&&e[1].datestart?e[1].datestart:null;return this.getRowClass(n,r,1,a)},countDuration:function(e,t){if(e){var r,n=1;t?(r=new Date(t),n=-1):r=new Date(e);var a=new Date;return((a-r)/1e3/60/60/24*n).toFixed()}},emptyFilter:function(e,t){var r=t.split(","),n=!0;if(this.filterSelected&&this.filterSelected.length)switch(this.filterSelected){case"full":e[1]&&!e[1]["dateend"]||(n=!1);break;case"empty":n=!!(!e[1]||e[1]&&e[1]["dateend"]);break;case"all":break}var a=JSON.stringify(e);return n&&a.indexOf(r[0])>=0?n=!0:r[0].length&&(n=!1),n&&this.tagsSelected.length&&(n=!1,this.tagsSelected.forEach((function(e){n=!n&&a.indexOf(e)>=0}))),n},sortCompare:function(e,t,r,n,a,o,i){var s,l;if("0"===r||"2"===r||"3"===r||"4"===r?(s=e[r],l=t[r]):(s=e[1],l=t[1]),s&&!l)return 1;if(!s&&l)return-1;switch(r){case"duration":if(e[1]&&t[1]){var c=parseInt(e[1][r]),u=parseInt(t[1][r]);return c<u?-1:c>u?1:0}break;case"fio":case"department":if(e[1]&&t[1]){var p=e[1]["people"][r],h=t[1]["people"][r];return p<h?-1:p>h?1:0}break;case"0":var f=e[r],d=t[r];return f<d?-1:f>d?1:0;case"2":case"3":case"4":return f=parseFloat(e[r]),d=parseFloat(t[r]),f<d?-1:f>d?1:0;default:break}return 0},printServices:function(e){var t="";return e.forEach((function(e){t.length&&(t+=", "),t+=e.name+" ("+e.code+")"})),t}}},_n=xn,Dn=(r("6308"),Object(st["a"])(_n,On,Pn,!1,null,null,null)),Cn=Dn.exports;g["default"].use(qe["a"]);var En={name:"history",components:{HistoryCashAnalize:Cn},data:function(){return{fields:[{key:"0",label:"Phone",sortable:!0},{key:"1",label:"FIO",sortable:!0},{key:"2",label:"Department",sortable:!0},{key:"3",label:"SUM (year)",sortable:!0}],cashyear:[],cashyearerrors:[]}},methods:{}},jn=En,Tn=Object(st["a"])(jn,wn,An,!1,null,null,null),Ln=Tn.exports,Rn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-page"},[r("form",{staticClass:"form-signin",attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.login()}}},[r("h2",{staticClass:"form-signin-heading"},[e._v("Please sign in")]),r("p",[r("label",{staticClass:"sr-only",attrs:{for:"username"}},[e._v("Username")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",size:"50",id:"username",name:"username",placeholder:"Username",required:"",autofocus:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),r("p",[r("label",{staticClass:"sr-only",attrs:{for:"password"}},[e._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",size:"50",id:"password",name:"password",placeholder:"Password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),r("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{size:"50"}},[e._v("Sign in")])])])},Un=[],In={name:"login",data:function(){return{username:"",password:""}},methods:{login:function(e){var t=this,r=new FormData;r.append("username",t.username),r.append("password",t.password),this.$store.dispatch("GlobalStore/AUTH_REQUEST",r)}}},Fn=In,Hn=(r("d6db"),Object(st["a"])(Fn,Rn,Un,!1,null,null,null)),Mn=Hn.exports;g["default"].use(Ke["a"]);var Yn=new Ke["a"]({mode:"history",store:Ea,routes:[{path:"/phones",name:"Телефоны",component:Dt,meta:{requiresAuth:!0,breadcrumb:[{text:"home",path:"/phones"},{text:"Телефоны",path:"/phones"}]}},{path:"/cashPhones",name:"По телефонам",component:zt,meta:{requiresAuth:!0,breadcrumb:[{text:"home",path:"/phones"},{text:"Начисления"},{text:"По телефонам"}]}},{path:"/cashYearDepartment",name:"По подразделениям (за год)",component:rr,meta:{requiresAuth:!0,breadcrumb:[{text:"home",path:"/phones"},{text:"Начисления"},{text:"По подразделениям"}]}},{path:"/cashMonth",name:"За месяц",component:br,meta:{requiresAuth:!0,breadcrumb:[{text:"home",path:"/phones"},{text:"Начисления"},{text:"За месяц"}]}},{path:"/import",name:"Импорт",component:Gr,meta:{requiresAuth:!0,breadcrumb:[{text:"home",path:"/phones"},{text:"Импорт"}]}},{path:"/detailMonth",name:"Анализ тарифов за месяц",component:an,meta:{requiresAuth:!0,breadcrumb:[{text:"home",path:"/phones"},{text:"Детализации"},{text:"Анализ тарифов за месяц"}]}},{path:"/detailYear",name:"Анализ тарифов за год",component:yn,meta:{requiresAuth:!0,breadcrumb:[{text:"home",path:"/phones"},{text:"Детализации"},{text:"Анализ тарифов за год"}]}},{path:"/history",name:"История",component:Ln,meta:{requiresAuth:!0,breadcrumb:[{text:"home",path:"/phones"},{text:"История"},{text:"История"}]}},{path:"/login",name:"login",component:Mn},{path:"*",component:Mn}]});Yn.beforeEach((function(e,t,r){if("/login"===e.path&&Ea.dispatch("GlobalStore/setCurrentPath",t.path),e.matched.some((function(e){return e.meta.requiresAuth})))if(null==localStorage.getItem("auth"))r({path:"/login",params:{nextUrl:e.fullPath}});else{switch(e.path){case"/cash":Ea.getters["CashStore/getPhonesCash"].length;break;case"/phones":break}r()}else r()}));var Nn,zn=Yn;function Vn(e){return Gn.apply(this,arguments)}function Gn(){return Gn=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.commit,T("getOptions");case 2:case"end":return e.stop()}}),e)}))),Gn.apply(this,arguments)}function Bn(e){e.getters["getAuthEnable"]&&!e.getters["getAuth"]&&zn.push("/login")}function Jn(e){return Qn.apply(this,arguments)}function Qn(){return Qn=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["getAuthEnable"]||!t.getters["getAuth"]){e.next=11;break}return localStorage.removeItem("auth"),t.commit(x.LOGOUT),e.prev=3,e.next=6,R("logout",null);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](3);case 10:zn.push("/login");case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),Qn.apply(this,arguments)}function Kn(e,t){return Zn.apply(this,arguments)}function Zn(){return Zn=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.state,e.next=3,R("login",r);case 3:o=e.sent,o&&200===o["status"]&&(n(x.AUTH_SUCCESS),localStorage.auth=!0,i=a.currentPath,""!==i&&"/"!==i||(i="/phones"),zn.push(i));case 5:case"end":return e.stop()}}),e)}))),Zn.apply(this,arguments)}function Xn(e){return qn.apply(this,arguments)}function qn(){return qn=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,j.defaults.xsrfHeaderName="X-CSRF-TOKEN",j.defaults.withCredentials=!0,e.next=5,j.get(t);case 5:return r=e.sent,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),qn.apply(this,arguments)}function Wn(e,t){return $n.apply(this,arguments)}function $n(){return $n=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(x.REST_LOAD_DATA,r);case 2:case"end":return e.stop()}}),e)}))),$n.apply(this,arguments)}function ea(e,t){var r=e.commit;r(x.SET_SEARCH_FILTER,t),localStorage.searchFilter=t}function ta(e,t){return ra.apply(this,arguments)}function ra(){return ra=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(x.SET_PROGRESS,r);case 2:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}function na(e,t){return aa.apply(this,arguments)}function aa(){return aa=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.state,o={progress:a.progress},e.next=4,R(r,{progress:o});case 4:i=e.sent,i&&200===i["status"]&&n(x.SET_PROGRESS,i.data.progress);case 6:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}function oa(e,t){var r=e.commit;e.state;r(x.SET_CURRENT_PATH,t)}var ia=(Nn={},Object(v["a"])(Nn,x.SET_CSRF,(function(e,t){e.csrf=t})),Object(v["a"])(Nn,x.AUTH_SUCCESS,(function(e){e.auth=!0})),Object(v["a"])(Nn,x.LOGOUT,(function(e){e.auth=!1})),Object(v["a"])(Nn,x.CLEAR_CSRF,(function(e){e.csrf=""})),Object(v["a"])(Nn,x.REST_LOAD_DATA,(function(e,t){e.restLoadData=t})),Object(v["a"])(Nn,x.SET_PROGRESS,(function(e,t){e.progress=t})),Object(v["a"])(Nn,x.SET_SEARCH_FILTER,(function(e,t){e.searchFilter=t})),Object(v["a"])(Nn,x.SET_CURRENT_PATH,(function(e,t){e.currentPath=t})),Nn);function sa(e){return e.csrf}function la(e){return e.auth}function ca(e){return e.csrfEnable}function ua(e){return e.authEnable}function pa(e){return e.restLoadData}function ha(e){return e.progress}function fa(e){return e.searchFilter}function da(e){return e.currentPath}var ma={namespaced:!0,mutations:ia,actions:c,state:Qe,getters:u,mounted:function(){}};function ba(e,t){return va.apply(this,arguments)}function va(){return va=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(_.SET_DETAIL_ANALIZE_YEAR,{data:r});case 2:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}function ga(e,t){return ya.apply(this,arguments)}function ya(){return ya=Object(b["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.commit;try{R("getDetailAnalizeYear",r).then((function(e){var t=e.data;Ea.dispatch("DetailStore/setDetailAnalizeYear",t)})).finally((function(e){Ea.dispatch("GlobalStore/setRestLoadData",!1)})),Ea.dispatch("GlobalStore/setRestLoadData",!0)}catch(n){console.log("[DetailStore] action error: getDetailAnalizeYear: ",n)}case 2:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}var wa=Object(v["a"])({},_.SET_DETAIL_ANALIZE_YEAR,(function(e,t){var r=t.data;e.detailAnalizeYear=r}));function Aa(e){return e.detailAnalizeYear}var Oa={detailAnalizeYear:[]},Pa={namespaced:!0,mutations:wa,actions:p,state:Oa,getters:h};function Sa(e){return ka.apply(this,arguments)}function ka(){return ka=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,R("getLastHistoryWithCashAnalize");case 4:n=e.sent,n=n["data"],r(D.SET_HISTORY_CASH_ANALIZE,{data:n}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log("[HistoryStore] action error: getLastHistoryWithCashAnalize: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),ka.apply(this,arguments)}var xa=Object(v["a"])({},D.SET_HISTORY_CASH_ANALIZE,(function(e,t){var r=t.data;e.historyCashAnalize=r}));function _a(e){return e.historyCashAnalize}var Da={historyCashAnalize:[]},Ca={namespaced:!0,mutations:xa,actions:f,state:Da,getters:d};g["default"].use(y["a"]);var Ea=new y["a"].Store({state:{},mutations:{},actions:{},modules:{PhoneListStore:de,CashStore:Te,ImportStore:Je,GlobalStore:ma,DetailStore:Pa,HistoryStore:Ca}});function ja(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ja(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var La={name:"App",beforeEnter:Ea.dispatch("GlobalStore/toLoginPage"),data:function(){return{breadcrumbList:{}}},computed:Ta({},y["a"].mapGetters({auth:"GlobalStore/getAuth"})),methods:{toLoginPage:function(){this.$store.dispatch("GlobalStore/toLoginPage")},logout:function(){this.$store.dispatch("GlobalStore/logout")}},mounted:function(){this.breadcrumbList=this.$route.meta.breadcrumb},watch:{$route:function(e,t){this.breadcrumbList=this.$route.meta.breadcrumb}}},Ra=La,Ua=(r("034f"),Object(st["a"])(Ra,w,A,!1,null,null,null)),Ia=Ua.exports;function Fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ha(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(r),!0).forEach((function(t){Object(v["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}g["default"].use(y["a"]),new g["default"]({router:zn,store:Ea,computed:Ha({},y["a"].mapGetters({CSRF:"GlobalStore/getCSRF"})),mounted:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Ea||this.CSRF.length){e.next=3;break}return e.next=3,Ea.dispatch("GlobalStore/loadCSRF");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),render:function(e){return e(Ia)}}).$mount("#app")},6308:function(e,t,r){"use strict";var n=r("1dbb"),a=r.n(n);a.a},"64a9":function(e,t,r){},"88b6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAACOklEQVRoge3XvYsTURTG4Se6LsKCiBYpLGQb/4FtZBvBShEttDOoIFvYBWwEGz8KtRLsRUGwU5EVWQsVbMRitdDGL1QQxQXRlCqra3ETGW8mmWSSdTY4P7hFzp175n3nTs65Q0lJyXJSa46RpI6f+IWTxUrpjwrOYSkaF7CqQF09MY6r2sW3xjWsLUxdBhOY01l8a9zDupT18XX/lCrmU0R8bY44Pt9ck6QwA5N4kSLgE45gBh9S5t9gSyJPIQammkLjm7/DIexujgN4lXLdZ2wdxMAgVWE77mt/FZ7iGL4kYg0cx5Po2o24i515RVRyrqvhklB1kjzEefzosG5M6A/bovhic65vbXkM1AWR8e7dwkXZ21/BQewbhrZ+DFRwVng9kizhCq73kYvw35jpomGoBsZxGfuj+KLQYR/0mCdmGke1v4qEhvc9K8HqHm4ygRvYG8W/4Qwe9ZCjE+/xXKhEa6K5adyUYSJrB6q4LZTLJA2cxutelWawGaewIYo/ww587LSwm4FJ3PF3s4EFnOiWNCdV4dS6KYq/FUy8TFvUycCU8OTjGk+oII1cErNZLxSEmAXswuN4Iq2RdWpQLZZLfLfcVaFQtDW82EBNOFGmnRaLZgKzOJwMJg3Uhe1LK2krhTGhWf7pRb30gbiz7hmmohRmo99dNa74T7ws4gNUHuIn1i8D7ejI70BpoGiG8R+IyapsQ/3eHfkdKA0UTWmgaEoDRZPnNDpozqHmG/kdKA2UlJSU/N/8BlpIjoHxc+IrAAAAAElFTkSuQmCC"},a993:function(e,t,r){"use strict";var n=r("d04f"),a=r.n(n);a.a},a9e7:function(e,t,r){},aa91:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABmJLR0QA/wD/AP+gvaeTAAAEB0lEQVRYhdXYzW/bdBgH8MeJX+KXpLA/gPOScVudAhJNs9uWpIc1SadCA121oYGEGM1OHCgIIbSkjCHRghAMNiS0plm3pjm3SQ+0jnaNuSDxD7RZYztxXn8c4mjWWJGd2ASes/Xoo2/y/H72A/AfL8zMwxe+OHjH4YTXxhX/wvIy1rULpS/c6IPnb/52jSCcKc6FY4+xUgcQWgQMQ3biAAAcxnD7V0mcSF0652Pj515mXvTQsUha+BkQMvUL2AZ04o5XPAyB0RQBhNMBF18/zY156IvhdOk7u5GGgNvX+cUjSf11Y1eUW+0OkIQTopNedsxNzU2nhZ/sRBoCAoahfNJ/pSLV728UdMiAj/W4XTORL4U1u5DmmiKEhdLC96c89Gw04OUI3AmNVgeyhbJSlZv3tpL8NauBxhLsVz/JqprZKIpKq90BinDCTMDHuhlyfjpdWhstUENuJ/nFyrG6rkdGgz6WY4lEZEVYHS3wGWS2UK71kbEpH+NmqUQoLXwzWqAOeVRt3H+KxCEW8LJjDJmIpA++tgI4/OQhhIXTpR9OeajZmYCP6Q1OGzI7ZVmqNe7kkhPvD9N+8AT7dVKSQR/HMdRCOLV/e7TAf0DGp3ycm3VdvpAWvhotUIesSI2n003iEA14Oc6FXwmlhFujBWrI3BJ/+YnunKQpAmaDZxiWxq+GU8LnpltaCuwXQlhkpfTjCx5XbGbSy5K4E+qNFqzvlJWa2rydS058ZLSVtQn2S5dktigqTS3JeNDH0i7ig0jq4LPRAjXkWZlffCKpjzaLotLqdHvIqTOMiyauT6eET0cLBIDljwEhhGrtLiDU7b18Yw4McHCgDgBtpIfhV37T1fsffuvh6EuxgJcjid4Bnt0ty7LauJO/MXHDSBunvTjXnB63vivKssnbxfoENZybId+ITp5m+7hMQVSqSuNu3uTVZy1Qh4tN+ViKxKHR6sDGjqhI9cbdfNL/ntmW1g1J72177e+4siLVmvdyS/53B2lrDVDDjbHUm3pcttDDDfMpMDzwObimhjtW1F+2lsYHSq5fw111J+AyhbIiSWp2K+l/e9jtw+BD8hxcq9OFB3u/y1VJ3cxZgAMYNMETcNldUa5Ua5u5pP8tq/Y25oEIYeEVYdVNU/PxoA5XEOVDqf4w/yGfsHKpZG5IdLiYhmu3NVy1/oiXeMuSMw98Bufq44oaTuYTduwMDd/FEU/olpumFvS4B0WxVpHUrXGZn7droWloiiMpYdVNU4lY0MtShJbcnqgcVusPx21KzhSwjXX/qDdbWKPZASfmgM29cu3oWN22GwdgYorPp/eXGIL4xM2Q2GG1njsr8XP/xp7a1DETurmfBIfjVealP+OZeLxjF+p/VX8B3MlKR/vPiQEAAAAASUVORK5CYII="},c955:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAXklEQVRIiWNgGAWjAAoYoZhmhk9kYGCYQStLHBgYGP4xMDD8h1pEE0vSkSyhmU9GqCVMtHABJYCmQTR0DXdgoCCjMROh5iEDA4MgAwPDRQYGhlyoRVQHNC3sRsEQBwD2mR7t73r7NQAAAABJRU5ErkJggg=="},d04f:function(e,t,r){},d193:function(e,t,r){},d395:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAACRElEQVRIie2VS2sTUQCFTzTJpB0TkyZGm0eb1lKZaqkiYouiUhAU3Ahu3AmC/QMuunanf8CfIQhFixYEF1LjIiUp00dM0uLMtMlgJ4+x80riQhxMnJlEHLMxZzfnnns/7uHOvUBfPZLj8fP3NwiX+wXhcYu9AMqSQsqqctcJACOJMKhziWgvwHSmIGxvf8GRXsCM9P+BnVaDuZ0SaJoBAFBUFOOjJ/49eJ1m8OrNmv5Nb7G4fXMGZyl7zqApeDWZNfSMwPQWi0r10BJETUbg8w50BouHSlceAAz5SQwOuC3BbncryhSciIewmeVavZGQYfZk+Lgl1Eim4PnrU6iKEljuAAAQGQ5g/tqUYdbWqkmSwP17cxCEHzep30/C4TDO2lo1wx7gQzILhv0KAIhFhzB3aQKR4cBvWduq3sxyWHqdQqPR1L18oYSdXR53bl3A5MSplrwtVUuyiuWVdAv0pxqNJpZX0hiNB0EQLt23perPuSIUWTNdQJZV5AolUGciumdL1T6vB5cvnracdIwk/hjUERyPBRGPBf964U7qP4u6KuVvzfV0fp8gXM7p8+Mhl8vyBdWlqBoyqRwvSWp9emYs7PUNGl47pjtOftzginvlWZYrPUyv5fmuqAAyqRzPsfwDga/OflrdYM1ypuC6Vm96w37u2aOrLytCzfz/alOlLGpPF64seYI+VtXqpjknAOwWitjfE5hfBzS1HpCF8iKAJzVR8r57m2IMV2hTTZT8ACAK5cWjcATa58mSQna7ib5s0XeUJOBRQv97mAAAAABJRU5ErkJggg=="},d6db:function(e,t,r){"use strict";var n=r("a9e7"),a=r.n(n);a.a},e5bd:function(e,t,r){},feda:function(e,t,r){"use strict";var n=r("e5bd"),a=r.n(n);a.a}});
//# sourceMappingURL=app.js.map